import{at as P,d as z,j as e,T as n,r as u,d0 as F,aw as R,B as f,S as l,aG as p,aB as w}from"./index-B_S0l-pH.js";import{S as L}from"./SearchableDropdown-BTGFcKz7.js";import{a as N}from"./allCountryName-pRAP9FS8.js";const c=P(),G=[c.display({header:"User",size:200,Cell:({row:a})=>{var s;const t=z(),i=a.original._id,x=()=>{t(`/admin/userTracking/sessionAnalytics/${i}`)};return e.jsx(n,{onClick:x,sx:{cursor:"pointer",textDecoration:"underline"},children:(s=a.original.user)==null?void 0:s.email})}}),c.display({header:"Device",size:150,Cell:({row:a})=>{var t,i;return e.jsxs(n,{children:[(t=a.original.device)==null?void 0:t.model," (",(i=a.original.device)==null?void 0:i.os,")"]})}}),c.display({header:"Location",size:150,Cell:({row:a})=>{var t,i;return e.jsxs(n,{children:[(t=a.original.location)==null?void 0:t.city,", ",(i=a.original.location)==null?void 0:i.country]})}}),c.display({header:"Session Duration (sec)",size:150,Cell:({row:a})=>e.jsx(n,{children:Math.floor(a.original.sessionDuration/1e3)})}),c.accessor("createdAt",{header:"Started At",size:200,Cell:({row:a})=>e.jsx(n,{children:new Date(a.original.createdAt).toLocaleString()})})];function k(){var m,y,S,C;const[a,t]=u.useState({pageIndex:0,pageSize:10}),[i,x]=u.useState(""),[s,v]=u.useState({status:"",country:"",city:"",deviceType:null,os:null}),{data:r,isFetching:j,isError:g,error:h}=F({page:a.pageIndex+1,limit:a.limit,search:i,...s}),b=(m=h==null?void 0:h.data)==null?void 0:m.message,E=((y=r==null?void 0:r.data)==null?void 0:y.activeSessions)||[],D=R({columns:G,data:E,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:((C=(S=r==null?void 0:r.data)==null?void 0:S.pagination)==null?void 0:C.total)||0,state:{pagination:a,globalFilter:i,isLoading:j,showAlertBanner:g},initialState:{showGlobalFilter:!0},onPaginationChange:t,onGlobalFilterChange:x,columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiToolbarAlertBannerProps:g?{color:"error",children:b||"Error loading Documents List."}:void 0}),d=u.useCallback((o,A)=>{v(T=>({...T,[o]:A}))},[]);return e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"h5",fontWeight:"700",fontSize:"1.8rem",mb:"2rem",children:"Active Session List"}),e.jsxs(f,{sx:{display:"flex",gap:"2rem"},children:[e.jsxs(l,{children:[e.jsx(n,{sx:{mb:"5px",fontSize:"12px"},children:"Country"}),e.jsx(L,{options:N,value:s==null?void 0:s.country,onChange:o=>d("country",o),placeholder:"Select Country",width:{xs:"100%",sm:200}})]}),e.jsxs(l,{children:[e.jsx(n,{sx:{mb:"5px",fontSize:"12px"},children:"City"}),e.jsx(p,{value:s==null?void 0:s.city,items:["PENDING","APPROVED","REJECTED"],onChange:o=>d("city",o.target.value),width:{xs:"100%",sm:200}})]}),e.jsxs(l,{children:[e.jsx(n,{sx:{mb:"5px",fontSize:"12px"},children:"Device type"}),e.jsx(p,{value:s==null?void 0:s.deviceType,items:["PENDING","APPROVED","REJECTED"],onChange:o=>d("deviceType",o.target.value),width:{xs:"100%",sm:200}})]}),e.jsxs(l,{children:[e.jsx(n,{sx:{mb:"5px",fontSize:"12px"},children:"OS"}),e.jsx(p,{value:s==null?void 0:s.os,items:["PENDING","APPROVED","REJECTED"],onChange:o=>d("os",o.target.value),width:{xs:"100%",sm:200}})]})]}),e.jsx(l,{sx:{marginTop:"2rem",borderRadius:"1.2rem",overflow:"hidden"},children:e.jsx(w,{table:D})})]})}export{k as default};
