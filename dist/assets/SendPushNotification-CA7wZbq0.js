import{o as E,aM as G,s as u,X as Z,c as R,r as A,da as K,a as P,b as N,db as oe,j as e,S as D,G as r,I as n,T as m,e as $,aG as q,h as O,k as B,aJ as de,dc as ue,cw as ce,aN as me,bj as he,dd as xe,az as ae,de as X,df as pe,dg as ge}from"./index-Bjlp2vES.js";import{S as ee}from"./SearchableSelector-C6ndV5ZN.js";import{C as H}from"./Card--HSV-vWh.js";import{d as W}from"./dayjs.min-jyhz54Th.js";import{A as le}from"./AdapterDayjs-B9IfESkl.js";const fe=i=>G(o=>o===""||o===null?void 0:o,i.optional()),ye=E({userId:u({required_error:"Client is required"}).nullable().refine(i=>i!==null,{message:"Client is required"}),title:u().min(1,"Title is required"),body:u().min(1,"Body is required"),type:u().min(1,"Type is required"),priority:u().min(1,"Priority is required"),imageUrl:fe(u().url("Invalid image URL").optional())}),be=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"},{label:"Urgent",value:"urgent"}],je=[{label:"General",value:"general"},{label:"Admin",value:"admin"},{label:"System",value:"system"}];function ie(){var j;const{state:i}=Z(),{email:o="",userName:f="",userId:p=null}=i||{},w=R(),[y,v]=A.useState(""),{data:s,isFetching:h}=K({page:1,limit:10,search:y},{skip:y.length<3}),I=y.length>=3?((j=s==null?void 0:s.data)==null?void 0:j.users)||[]:[],U={userId:null,title:"",body:"",type:"",priority:"",imageUrl:""},{register:b,handleSubmit:l,reset:S,watch:z,setValue:t,formState:{errors:d}}=P({resolver:N(ye),defaultValues:U}),[a,{isLoading:C}]=oe(),c=async x=>{var M;try{const T=await a(x).unwrap();(T==null?void 0:T.status)=="success"&&(w(B({open:!0,message:T==null?void 0:T.message,severity:"success"})),S({...U,userId:p?z("userId"):null}))}catch(T){w(B({open:!0,message:((M=T==null?void 0:T.data)==null?void 0:M.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return A.useEffect(()=>{p&&t("userId",p,{shouldValidate:!0})},[p,t]),e.jsx(D,{children:e.jsxs(H,{component:"form",onSubmit:l(c),sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},children:[e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Select Client *"}),e.jsx(ee,{disabled:p,width:"100%",items:p?[{value:p,name:`${f} (${o})`}]:I.map(x=>({value:x._id,name:`${x.userName} (${x.email})`})),value:z("userId"),onChange:x=>t("userId",x,{shouldValidate:!0}),onSearchChange:v,isLoading:h,shouldBeFullwidth:!0}),e.jsx(n,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),d.userId&&e.jsx(m,{color:"error",fontSize:"14px",children:d.userId.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Title *"}),e.jsx($,{...b("title"),size:"small",fullWidth:!0,placeholder:"Enter title"}),d.title&&e.jsx(m,{color:"error",fontSize:"14px",children:d.title.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Body *"}),e.jsx($,{...b("body"),size:"small",fullWidth:!0,placeholder:"Enter body"}),d.body&&e.jsx(m,{color:"error",fontSize:"14px",children:d.body.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Type *"}),e.jsx(q,{items:je,value:z("type"),onChange:x=>t("type",x.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),d.type&&e.jsx(m,{color:"error",fontSize:"14px",children:d.type.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Priority *"}),e.jsx(q,{items:be,value:z("priority"),onChange:x=>t("priority",x.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),d.priority&&e.jsx(m,{color:"error",fontSize:"14px",children:d.priority.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Image URL"}),e.jsx($,{...b("imageUrl"),fullWidth:!0,size:"small",placeholder:"https://example.com/image.jpg"})]})]}),e.jsx(O,{type:"submit",variant:"contained",disabled:C,sx:{textTransform:"capitalize",boxShadow:"none",mt:"1.5rem","&:hover":{boxShadow:"none"}},children:"Submit"})]})})}const J=i=>G(o=>o===""||o===null?void 0:o,i.optional()),Se=E({userIds:de(u({required_error:"User is required"}).nullable().refine(i=>i!==null,{message:"User is required"})).min(1,"At least one user is required"),title:u().min(1,"Title is required"),body:u().min(1,"Body is required"),type:u().min(1,"Type is required"),priority:u().min(1,"Priority is required"),imageUrl:J(u().url("Invalid image URL")),data:E({offer:J(u().optional()),action:J(u().optional())})}),ve=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"},{label:"Urgent",value:"urgent"}],ze=[{label:"General",value:"general"},{label:"Admin",value:"admin"},{label:"System",value:"system"}];function Te(){var x,M,T,_,L,te,se;const{state:i}=Z(),{selectedUsers:o=[]}=i||{},f=R(),[p,w]=A.useState(""),{data:y,isFetching:v}=K({page:1,limit:10,search:p},{skip:p.length<3}),s=p.length>=3?((x=y==null?void 0:y.data)==null?void 0:x.users)||[]:[],h=o.map(g=>({value:g._id,name:`${g.userName} (${g.email})`})),I=s.map(g=>({value:g._id,name:`${g.userName} (${g.email})`})),U=[...h,...I].reduce((g,V)=>g.find(k=>k.value===V.value)?g:g.concat([V]),[]),b={userIds:o?o.map(g=>g._id):[],title:"",body:"",type:"",priority:"",imageUrl:"",data:{offer:"",action:""}},{register:l,handleSubmit:S,reset:z,watch:t,setValue:d,formState:{errors:a}}=P({resolver:N(Se),defaultValues:b}),[C,{isLoading:c}]=ue(),j=async g=>{var V;try{const F=await C(g).unwrap();(F==null?void 0:F.status)==="success"&&(f(B({open:!0,message:F==null?void 0:F.message,severity:"success"})),z({...b,userIds:o?o.map(k=>k._id):[]}))}catch(F){f(B({open:!0,message:((V=F==null?void 0:F.data)==null?void 0:V.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(D,{children:e.jsxs(H,{component:"form",onSubmit:S(j),sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},children:[e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,size:{xs:12,md:6},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Select Users *"}),e.jsx(ee,{multiple:!0,items:U,value:t("userIds"),onChange:g=>d("userIds",g,{shouldValidate:!0}),onSearchChange:w,isLoading:v,shouldBeFullwidth:!0,disabled:(o==null?void 0:o.length)>0}),a.userIds&&e.jsx(m,{color:"error",children:a.userIds.message})]}),e.jsxs(r,{item:!0,size:{xs:12,md:6},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Title *"}),e.jsx($,{...l("title"),fullWidth:!0,size:"small",placeholder:"Enter notification title"}),a.title&&e.jsx(m,{color:"error",children:a.title.message})]}),e.jsxs(r,{item:!0,size:{xs:12},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Body *"}),e.jsx($,{...l("body"),fullWidth:!0,size:"small",multiline:!0,rows:3,placeholder:"Enter notification message"}),a.body&&e.jsx(m,{color:"error",children:a.body.message})]}),e.jsxs(r,{item:!0,size:{xs:12,md:6},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Type *"}),e.jsx(q,{items:ze,value:t("type"),onChange:g=>d("type",g.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),a.type&&e.jsx(m,{color:"error",children:a.type.message})]}),e.jsxs(r,{item:!0,size:{xs:12,md:6},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Priority *"}),e.jsx(q,{items:ve,value:t("priority"),onChange:g=>d("priority",g.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),a.priority&&e.jsx(m,{color:"error",children:a.priority.message})]}),e.jsxs(r,{item:!0,size:{xs:12},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Image URL"}),e.jsx($,{...l("imageUrl"),fullWidth:!0,size:"small",placeholder:"https://example.com/image.jpg"}),a.imageUrl&&e.jsx(m,{color:"error",children:a.imageUrl.message})]}),e.jsxs(r,{item:!0,size:{xs:12,md:6},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Offer Code"}),e.jsx($,{...l("data.offer"),fullWidth:!0,size:"small",placeholder:"Enter offer code"}),((M=a.data)==null?void 0:M.offer)&&e.jsx(m,{color:"error",children:(_=(T=a.data)==null?void 0:T.offer)==null?void 0:_.message})]}),e.jsxs(r,{item:!0,size:{xs:12,md:6},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Action"}),e.jsx($,{...l("data.action"),fullWidth:!0,size:"small",placeholder:"Enter action name"}),((L=a.data)==null?void 0:L.action)&&e.jsx(m,{color:"error",children:(se=(te=a.data)==null?void 0:te.action)==null?void 0:se.message})]})]}),e.jsx(O,{type:"submit",variant:"contained",disabled:c,sx:{textTransform:"capitalize",boxShadow:"none",mt:"1.5rem","&:hover":{boxShadow:"none"}},children:"Submit"})]})})}const $e=E({title:u().min(1,"Title is required"),body:u().min(1,"Body is required"),type:me("system"),priority:ce(["low","medium","high","urgent"]),data:E({maintenanceStart:G(i=>W.isDayjs(i)?i.toISOString():i,u().datetime({message:"Invalid start datetime"})),maintenanceEnd:G(i=>W.isDayjs(i)?i.toISOString():i,u().datetime({message:"Invalid end datetime"}))})}).refine(i=>new Date(i.data.maintenanceEnd)>new Date(i.data.maintenanceStart),{message:"Maintenance end must be after start time",path:["data","maintenanceEnd"]});var Y={exports:{}},Ue=Y.exports,re;function we(){return re||(re=1,function(i,o){(function(f,p){i.exports=p()})(Ue,function(){var f="minute",p=/[+-]\d\d(?::?\d\d)?/g,w=/([+-]|\d\d)/g;return function(y,v,s){var h=v.prototype;s.utc=function(t){var d={date:t,utc:!0,args:arguments};return new v(d)},h.utc=function(t){var d=s(this.toDate(),{locale:this.$L,utc:!0});return t?d.add(this.utcOffset(),f):d},h.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var I=h.parse;h.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),I.call(this,t)};var U=h.init;h.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else U.call(this)};var b=h.utcOffset;h.utcOffset=function(t,d){var a=this.$utils().u;if(a(t))return this.$u?0:a(this.$offset)?b.call(this):this.$offset;if(typeof t=="string"&&(t=function(x){x===void 0&&(x="");var M=x.match(p);if(!M)return null;var T=(""+M[0]).match(w)||["-",0,0],_=T[0],L=60*+T[1]+ +T[2];return L===0?0:_==="+"?L:-L}(t),t===null))return this;var C=Math.abs(t)<=16?60*t:t,c=this;if(d)return c.$offset=C,c.$u=t===0,c;if(t!==0){var j=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(c=this.local().add(C+j,f)).$offset=C,c.$x.$localOffset=j}else c=this.utc();return c};var l=h.format;h.format=function(t){var d=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,d)},h.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},h.isUTC=function(){return!!this.$u},h.toISOString=function(){return this.toDate().toISOString()},h.toString=function(){return this.toDate().toUTCString()};var S=h.toDate;h.toDate=function(t){return t==="s"&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():S.call(this)};var z=h.diff;h.diff=function(t,d,a){if(t&&this.$u===t.$u)return z.call(this,t,d,a);var C=this.local(),c=s(t).local();return z.call(C,c,d,a)}}})}(Y)),Y.exports}var Ce=we();const ne=he(Ce);W.extend(ne);const Ie=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"},{label:"Urgent",value:"urgent"}];function Fe(){var b,l,S,z,t,d;const i=R(),o={title:"",body:"",type:"system",priority:"",data:{maintenanceStart:null,maintenanceEnd:null}},{register:f,handleSubmit:p,reset:w,watch:y,setValue:v,formState:{errors:s}}=P({resolver:N($e),defaultValues:o}),[h,{isLoading:I}]=xe(),U=async a=>{var c;const C={...a,data:{maintenanceStart:W(a.data.maintenanceStart).utc().toISOString(),maintenanceEnd:W(a.data.maintenanceEnd).utc().toISOString()}};try{const j=await h(C).unwrap();(j==null?void 0:j.status)==="success"&&(i(B({open:!0,message:j.message,severity:"success"})),w(o))}catch(j){i(B({open:!0,message:((c=j==null?void 0:j.data)==null?void 0:c.message)||"Failed to send notification",severity:"error"}))}};return e.jsx(D,{children:e.jsxs(H,{component:"form",onSubmit:p(U),sx:{boxShadow:"0 0px 8px rgba(0,0,0,0.19)",borderRadius:"1rem",p:{xs:2,md:3},mt:3},children:[e.jsx(ae,{dateAdapter:le,children:e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,size:{xs:12,md:6},children:[e.jsx(n,{sx:{mb:.5},children:"Title *"}),e.jsx($,{...f("title"),fullWidth:!0,size:"small",placeholder:"Enter title"}),s.title&&e.jsx(m,{color:"error",fontSize:13,children:s.title.message})]}),e.jsxs(r,{item:!0,size:{xs:12,md:6},children:[e.jsx(n,{sx:{mb:.5},children:"Body *"}),e.jsx($,{...f("body"),fullWidth:!0,size:"small",placeholder:"Enter body"}),s.body&&e.jsx(m,{color:"error",fontSize:13,children:s.body.message})]}),e.jsxs(r,{item:!0,size:{xs:12,md:4},children:[e.jsx(n,{sx:{mb:.5},children:"Priority *"}),e.jsx(q,{items:Ie,value:y("priority"),onChange:a=>v("priority",a.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),s.priority&&e.jsx(m,{color:"error",fontSize:13,children:s.priority.message})]}),e.jsxs(r,{item:!0,size:{xs:12,md:4},children:[e.jsx(n,{sx:{mb:.5},children:"Maintenance Start *"}),e.jsx(X,{value:y("data.maintenanceStart"),onChange:a=>v("data.maintenanceStart",a,{shouldValidate:!0}),disablePast:!0,slotProps:{textField:{size:"small",fullWidth:!0,error:!!((b=s==null?void 0:s.data)!=null&&b.maintenanceStart),helperText:(S=(l=s==null?void 0:s.data)==null?void 0:l.maintenanceStart)==null?void 0:S.message}}})]}),e.jsxs(r,{item:!0,size:{xs:12,md:4},children:[e.jsx(n,{sx:{mb:.5},children:"Maintenance End *"}),e.jsx(X,{value:y("data.maintenanceEnd"),minDateTime:y("data.maintenanceStart"),onChange:a=>v("data.maintenanceEnd",a,{shouldValidate:!0}),slotProps:{textField:{size:"small",fullWidth:!0,error:!!((z=s==null?void 0:s.data)!=null&&z.maintenanceEnd),helperText:(d=(t=s==null?void 0:s.data)==null?void 0:t.maintenanceEnd)==null?void 0:d.message}}})]})]})}),e.jsx(O,{type:"submit",variant:"contained",disabled:I,sx:{mt:3,textTransform:"capitalize"},children:"Send Broadcast"})]})})}const qe=E({role:u({required_error:"Role is required"}).min(1,"Role is required"),title:u().min(1,"Title is required"),body:u().min(1,"Body is required"),type:u().min(1,"Type is required"),priority:u().min(1,"Priority is required"),data:E({surveyUrl:u().url("Survey URL must be a valid URL"),action:u().min(1,"Action is required")})}),Be=[{label:"User",value:"USER"},{label:"Admin",value:"ADMIN"}],We=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"},{label:"Urgent",value:"urgent"}],Ee=[{label:"General",value:"general"},{label:"Admin",value:"admin"},{label:"System",value:"system"}];function Me(){var b,l;const i=R(),o={role:"",title:"",body:"",type:"",priority:"",data:{surveyUrl:"",action:""}},{register:f,handleSubmit:p,reset:w,watch:y,setValue:v,formState:{errors:s}}=P({resolver:N(qe),defaultValues:o}),[h,{isLoading:I}]=pe(),U=async S=>{var z;try{const t=await h(S).unwrap();(t==null?void 0:t.status)==="success"&&(i(B({open:!0,message:t.message,severity:"success"})),w(o))}catch(t){i(B({open:!0,message:((z=t==null?void 0:t.data)==null?void 0:z.message)||"Failed to send notification",severity:"error"}))}};return e.jsx(D,{children:e.jsxs(H,{component:"form",onSubmit:p(U),sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1rem",p:{xs:"1rem",md:"2rem"},mt:"2rem"},children:[e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Role *"}),e.jsx(q,{items:Be,value:y("role"),onChange:S=>v("role",S.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),s.role&&e.jsx(m,{color:"error",fontSize:"14px",children:s.role.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Title *"}),e.jsx($,{...f("title"),size:"small",fullWidth:!0,placeholder:"Enter title"}),s.title&&e.jsx(m,{color:"error",fontSize:"14px",children:s.title.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Body *"}),e.jsx($,{...f("body"),size:"small",fullWidth:!0,placeholder:"Enter body"}),s.body&&e.jsx(m,{color:"error",fontSize:"14px",children:s.body.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Type *"}),e.jsx(q,{items:Ee,value:y("type"),onChange:S=>v("type",S.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),s.type&&e.jsx(m,{color:"error",fontSize:"14px",children:s.type.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Priority *"}),e.jsx(q,{items:We,value:y("priority"),onChange:S=>v("priority",S.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),s.priority&&e.jsx(m,{color:"error",fontSize:"14px",children:s.priority.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:6},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Survey URL *"}),e.jsx($,{...f("data.surveyUrl"),size:"small",fullWidth:!0,placeholder:"https://example.com/survey"}),((b=s==null?void 0:s.data)==null?void 0:b.surveyUrl)&&e.jsx(m,{color:"error",fontSize:"14px",children:s.data.surveyUrl.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:6},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Action *"}),e.jsx($,{...f("data.action"),size:"small",fullWidth:!0,placeholder:"Enter action type"}),((l=s==null?void 0:s.data)==null?void 0:l.action)&&e.jsx(m,{color:"error",fontSize:"14px",children:s.data.action.message})]})]}),e.jsx(O,{type:"submit",variant:"contained",disabled:I,sx:{mt:"1.5rem",textTransform:"capitalize",boxShadow:"none","&:hover":{boxShadow:"none"}},children:"Send Notification"})]})})}const Le=E({userId:u({required_error:"Client is required"}).nullable().refine(i=>i!==null,{message:"Client is required"}),title:u().min(1,"Title is required"),body:u().min(1,"Body is required"),type:u().min(1,"Type is required"),priority:u().min(1,"Priority is required"),scheduledFor:u().refine(i=>!isNaN(Date.parse(i)),{message:"Scheduled time must be a valid ISO date"}),data:E({action:u().min(1,"Action is required")})});W.extend(ne);const De=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"},{label:"Urgent",value:"urgent"}],Ve=[{label:"General",value:"general"},{label:"Admin",value:"admin"},{label:"System",value:"system"}];function Ae(){var d,a,C;const i=R(),[o,f]=A.useState(""),{data:p,isFetching:w}=K({page:1,limit:10,search:o},{skip:o.length<3}),y=o.length>=3?((d=p==null?void 0:p.data)==null?void 0:d.users)||[]:[],v={userId:null,title:"",body:"",type:"",priority:"",scheduledFor:"",data:{action:""}},{register:s,handleSubmit:h,reset:I,watch:U,setValue:b,formState:{errors:l}}=P({resolver:N(Le),defaultValues:v}),[S,{isLoading:z}]=ge(),t=async c=>{var j;try{const x=await S(c).unwrap();(x==null?void 0:x.status)==="success"&&(i(B({open:!0,message:x.message,severity:"success"})),I(v))}catch(x){i(B({open:!0,message:((j=x==null?void 0:x.data)==null?void 0:j.message)||"Failed to schedule notification",severity:"error"}))}};return e.jsx(D,{children:e.jsxs(H,{component:"form",onSubmit:h(t),sx:{boxShadow:"0 0px 0px 0 rgba(0,0,0,0.19), 0 0px 8px 0 rgba(0,0,0,0.19)",borderRadius:"1rem",p:{xs:"1rem",md:"2rem"},mt:"2rem"},children:[e.jsxs(r,{container:!0,spacing:3,children:[e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Select Client *"}),e.jsx(ee,{items:y.map(c=>({value:c._id,name:`${c.userName} (${c.email})`})),value:U("userId"),onChange:c=>b("userId",c,{shouldValidate:!0}),onSearchChange:f,isLoading:w,shouldBeFullwidth:!0}),l.userId&&e.jsx(m,{color:"error",fontSize:"14px",children:l.userId.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Title *"}),e.jsx($,{...s("title"),size:"small",fullWidth:!0,placeholder:"Enter title"}),l.title&&e.jsx(m,{color:"error",fontSize:"14px",children:l.title.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Body *"}),e.jsx($,{...s("body"),size:"small",fullWidth:!0,placeholder:"Enter body"}),l.body&&e.jsx(m,{color:"error",fontSize:"14px",children:l.body.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Type *"}),e.jsx(q,{items:Ve,value:U("type"),onChange:c=>b("type",c.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),l.type&&e.jsx(m,{color:"error",fontSize:"14px",children:l.type.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Priority *"}),e.jsx(q,{items:De,value:U("priority"),onChange:c=>b("priority",c.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),l.priority&&e.jsx(m,{color:"error",fontSize:"14px",children:l.priority.message})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Schedule Date & Time *"}),e.jsx(ae,{dateAdapter:le,children:e.jsx(X,{value:U("scheduledFor")?W(U("scheduledFor")):null,minDateTime:W(),onChange:c=>b("scheduledFor",c?W(c).utc().toISOString():"",{shouldValidate:!0}),slotProps:{textField:{size:"small",fullWidth:!0,error:!!(l!=null&&l.scheduledFor),helperText:(a=l==null?void 0:l.scheduledFor)==null?void 0:a.message}}})})]}),e.jsxs(r,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Action *"}),e.jsx($,{...s("data.action"),size:"small",fullWidth:!0,placeholder:"Enter action type"}),((C=l==null?void 0:l.data)==null?void 0:C.action)&&e.jsx(m,{color:"error",fontSize:"14px",children:l.data.action.message})]})]}),e.jsx(O,{type:"submit",variant:"contained",disabled:z,sx:{mt:"1.5rem",boxShadow:"none"},children:"Schedule Notification"})]})})}const Q=["Single User","Multiple User","Broadcast To All","By Role","Schedule"];function _e(){const{state:i}=Z(),[o,f]=A.useState(i!=null&&i.selectType?i==null?void 0:i.selectType:Q[0]),p={"Single User":e.jsx(ie,{}),"Multiple User":e.jsx(Te,{}),"Broadcast To All":e.jsx(Fe,{}),"By Role":e.jsx(Me,{}),Schedule:e.jsx(Ae,{})};return e.jsxs(D,{children:[e.jsx(m,{variant:"h5",fontWeight:"700",fontSize:"1.8rem",mb:"2rem",children:"Send Push Notification"}),e.jsx(q,{width:{xs:"100%",sm:"250px"},items:Q,value:o||Q[0],showDefaultOption:!1,onChange:w=>f(w.target.value)}),p[o]||e.jsx(ie,{})]})}export{_e as default};
