import{at as B,j as e,T as n,c as R,dm as T,S as c,h as w,k as f,r as p,dn as L,aw as N,B as M,aG as y,aB as G}from"./index-DcG3qw6T.js";const d=B(),E=[d.display({header:"Sent By",size:150,Cell:({row:a})=>{var s,r;return e.jsxs(n,{children:[(s=a.original.sentBy)==null?void 0:s.name,"(",(r=a.original.sentBy)==null?void 0:r.email,")"]})}}),d.display({header:"Recipient",size:150,Cell:({row:a})=>{var s;return e.jsx(n,{children:(s=a.original.recipient)==null?void 0:s.email})}}),d.display({header:"Post Type",size:150,Cell:({row:a})=>e.jsx(n,{children:a.original.type})}),d.display({header:"Priority",size:150,Cell:({row:a})=>e.jsx(n,{children:a.original.priority})}),d.accessor("deliveryStatus",{header:"Status",size:200}),d.accessor("createdAt",{header:"created At",size:200,Cell:({row:a})=>e.jsx(n,{children:new Date(a.original.createdAt).toLocaleString()})}),d.display({id:"action",header:"Action",Cell:({row:a})=>{var l;const s=(l=a==null?void 0:a.original)==null?void 0:l._id,r=R(),[g,{isLoading:i}]=T(),h=async()=>{var u;try{const t=await g(s).unwrap();(t==null?void 0:t.status)=="success"&&r(f({open:!0,message:t==null?void 0:t.message,severity:"success"}))}catch(t){r(f({open:!0,message:((u=t==null?void 0:t.data)==null?void 0:u.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return a.original.deliveryStatus=="failed"?e.jsx(c,{sx:{flexDirection:"row",gap:"10px"},children:e.jsx(w,{variant:"contained",onClick:h,disabled:i,children:"Retry"})}):null}})],k=[{label:"Pending",value:"pending"},{label:"Sent",value:"sent"},{label:"Delivered",value:"delivered"},{label:"Failed",value:"failed"},{label:"Read",value:"read"}],H=[{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"},{label:"Urgent",value:"urgent"}],D=[{label:"General",value:"general"},{label:"Admin",value:"admin"},{label:"System",value:"system"}];function Q(){var b,v,j,S;const[a,s]=p.useState({pageIndex:0,pageSize:10}),[r,g]=p.useState(""),[i,h]=p.useState({status:"",priority:"",type:""}),{data:l,isLoading:u,isError:t,error:m}=L({page:a.pageIndex+1,limit:a.pageSize,...i}),C=(b=m==null?void 0:m.data)==null?void 0:b.message,P=((v=l==null?void 0:l.data)==null?void 0:v.notifications)||[],z=N({columns:E,data:P,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:((S=(j=l==null?void 0:l.data)==null?void 0:j.pagination)==null?void 0:S.total)||0,state:{pagination:a,globalFilter:r,isLoading:u,showAlertBanner:t},initialState:{showGlobalFilter:!0},onPaginationChange:s,onGlobalFilterChange:g,columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiToolbarAlertBannerProps:t?{color:"error",children:C||"Error loading Push Notification List."}:void 0}),x=p.useCallback((o,F)=>{h(A=>({...A,[o]:F}))},[]);return e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"h5",fontWeight:"700",fontSize:"1.8rem",mb:"2rem",children:"All Push Notification List"}),e.jsxs(M,{sx:{display:"flex",gap:"2rem"},children:[e.jsxs(c,{children:[e.jsx(n,{sx:{mb:"5px",fontSize:"12px"},children:"Status"}),e.jsx(y,{value:i==null?void 0:i.status,items:k,onChange:o=>x("status",o.target.value),width:{xs:"100%",sm:200}})]}),e.jsxs(c,{children:[e.jsx(n,{sx:{mb:"5px",fontSize:"12px"},children:"Type"}),e.jsx(y,{value:i==null?void 0:i.type,items:D,onChange:o=>x("type",o.target.value),width:{xs:"100%",sm:200}})]}),e.jsxs(c,{children:[e.jsx(n,{sx:{mb:"5px",fontSize:"12px"},children:"Priority"}),e.jsx(y,{value:i==null?void 0:i.priority,items:H,onChange:o=>x("priority",o.target.value),width:{xs:"100%",sm:200}})]})]}),e.jsx(c,{sx:{marginTop:"2rem",borderRadius:"1.2rem",overflow:"hidden"},children:e.jsx(G,{table:z})})]})}export{Q as default};
