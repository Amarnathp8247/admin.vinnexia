import{o as D,aC as F,s as U,c as k,r as L,aD as E,aI as V,a as q,bJ as B,j as s,S as $,T as o,aF as N,G as c,I as i,h as Q,b as R,k as b}from"./index-BuLT-AS9.js";import{S as f}from"./SearchableSelector-DnYtu6tK.js";import{C as J}from"./Card-C53o8KFk.js";const W=D({mt5Login:U().min(1,"Please select MT5 login user"),groupId:F({required_error:"Group is required"}).nullable().refine(a=>a!==null,{message:"Group is required"})});function K(){var h;const a=k(),[n,j]=L.useState(""),[u,T]=L.useState(""),m={mt5Login:"",groupId:null},{data:d,isLoading:y}=E({page:1,sizePerPage:20,search:u},{skip:u.length<2}),{data:l,isLoading:G}=V({page:1,sizePerPage:10,search:n},{skip:n.length<3}),M=u.length>=2?((h=d==null?void 0:d.data)==null?void 0:h.groupsList)||[]:[],w=n.length>=2?(l==null?void 0:l.data)||[]:[],{watch:p,setValue:g,handleSubmit:z,reset:v,formState:{errors:t}}=q({resolver:R(W),defaultValues:m}),[I,{isLoading:P}]=B(),C=async e=>{var x,S;try{const r=await I(e).unwrap();r!=null&&r.status&&(a(b({open:!0,message:r==null?void 0:r.message,severity:"success"})),v(m))}catch(r){(x=r==null?void 0:r.data)!=null&&x.status||a(b({open:!0,message:((S=r==null?void 0:r.data)==null?void 0:S.message)||"Failed to sign in. Please try again later.",severity:"error"}))}};return s.jsxs($,{children:[s.jsx(o,{sx:{fontSize:"2rem",fontWeight:"700"},children:"Update MT5 Group"}),s.jsxs(J,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},component:"form",onSubmit:z(C),children:[s.jsx(o,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),s.jsx(N,{sx:{my:"1.2rem"}}),s.jsxs(c,{container:!0,size:12,spacing:3,children:[s.jsxs(c,{item:!0,size:{xs:12,sm:6,md:4},children:[s.jsx(i,{sx:{mb:".5rem"},children:"Select MT5 user *"}),s.jsx(f,{width:"100%",items:w.map(e=>({value:e.Login,name:`${e.Name} (${e.Email}) (${e.Login})`})),value:p("mt5Login"),onChange:e=>g("mt5Login",e,{shouldValidate:!0}),onSearchChange:e=>j(e),isLoading:G,shouldBeFullwidth:!0}),s.jsx(i,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),t.mt5Login&&s.jsx(o,{color:"error",fontSize:"14px",children:t.mt5Login.message})]}),s.jsxs(c,{item:!0,size:{xs:12,sm:6,md:4},children:[s.jsx(i,{sx:{mb:".5rem"},children:"Select MT5 group *"}),s.jsx(f,{width:"100%",items:M.map(e=>({value:e.id,name:e.name})),value:p("groupId"),onChange:e=>g("groupId",e,{shouldValidate:!0}),onSearchChange:e=>T(e),isLoading:y,shouldBeFullwidth:!0}),s.jsx(i,{sx:{fontSize:"12px"},children:"Please enter 2 or more characters"}),t.groupId&&s.jsx(o,{color:"error",fontSize:"14px",children:t.groupId.message})]})]}),s.jsx(Q,{variant:"contained",type:"submit",disabled:P,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{K as default,W as updateMT5GroupSchema};
