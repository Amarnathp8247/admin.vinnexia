import{at as F,j as a,T as o,c as R,b6 as B,h as k,k as S,r as d,aR as N,aw as Y,B as y,S as h,I as D,aG as V,az as I,aA as b,ax as w,ay as H,aB as G}from"./index-DcG3qw6T.js";import{d as E}from"./dayjs.min-CpAZ4qKR.js";import{A as O}from"./AdapterDayjs-DPH4TRzJ.js";const n=F(),W=[n.accessor("mt5Login",{header:"MT5 Login ID",size:100,Cell:({row:t})=>{const e=t.original.mt5Login;return a.jsx(o,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),n.display({id:"Client Name",header:"Client Name",Cell:({row:t})=>{const e=t.original.user.name;return a.jsx(o,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),n.display({id:"Client Email",header:"Client Email",Cell:({row:t})=>{var c,m;const e=(m=(c=t==null?void 0:t.original)==null?void 0:c.user)==null?void 0:m.email;return a.jsx(o,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),n.accessor("transactionType",{header:"Transaction Type",size:120,Cell:({row:t})=>{const e=t.original.transactionType;return a.jsx(o,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),n.accessor("paymentMethods",{header:"Payment Methods",size:120,Cell:({row:t})=>{const e=t.original.paymentMethods;return a.jsx(o,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),n.accessor("referrenceNo",{header:"Referrence No.",size:120,Cell:({row:t})=>{const e=t.original.referrenceNo;return a.jsx(o,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),n.accessor("amount",{header:"Amount",size:150,Cell:({row:t})=>{const e=t.original.amount;return a.jsx(o,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),n.accessor("status",{header:"Status",size:150,Cell:({row:t})=>{const e=t.original.status;return a.jsx(o,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),n.accessor("remark",{header:"Remark",size:80,Cell:({row:t})=>{const e=t.original.remark;return a.jsx(o,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),n.accessor("createdAt",{header:"Registration Date",size:200,Cell:({row:t})=>{const e=new Date(t.original.createdAt).toLocaleString();return a.jsx(o,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),n.accessor("expireAt",{header:"Expiry Date",size:200,Cell:({row:t})=>{const e=new Date(t.original.expireAt).toLocaleString();return a.jsx(o,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),n.accessor("isDeleted",{header:"Status",size:150,Cell:({row:t})=>{const e=t.original.isDeleted;return a.jsx(o,{sx:{fontWeight:"bold",color:e?"red":"green"},children:e?"Deleted":"Active"})}}),n.display({id:"action",header:"Action",size:80,Cell:({row:t})=>{var p;const e=(p=t==null?void 0:t.original)==null?void 0:p.id,c=R(),[m,{isLoading:r}]=B(),g=async()=>{var i,u;try{const s=await m({bonusId:e}).unwrap();s!=null&&s.status&&c(S({open:!0,message:s==null?void 0:s.message,severity:"success"}))}catch(s){(i=s==null?void 0:s.data)!=null&&i.status||c(S({open:!0,message:((u=s==null?void 0:s.data)==null?void 0:u.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return!t.original.isDeleted&&a.jsx(k,{variant:"contained",size:"small",disabled:r,onClick:g,children:"Remove"})}})],K=["BANK","CASH","CRYPTO"],J=()=>{var z;const[t,e]=d.useState({pageIndex:0,pageSize:10}),[c,m]=d.useState(""),[r,g]=d.useState({transactionType:"CREDIT-DEPOSIT",paymentMethod:"",fromDate:null,toDate:null,isDeleted:!1}),j=r.fromDate?E(r.fromDate).format("YYYY-MM-DD"):void 0,p=r.toDate?E(r.toDate).format("YYYY-MM-DD"):void 0,{data:i,isLoading:u,isError:s,error:f}=N({page:t.pageIndex+1,sizePerPage:t.pageSize,search:c,...r,fromDate:j,toDate:p}),M=(z=f==null?void 0:f.data)==null?void 0:z.message,C=(i==null?void 0:i.data)||[],T=d.useMemo(()=>W,[]),A=d.useMemo(()=>C,[C]),v=Y({columns:T,data:A,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:(i==null?void 0:i.totalRecords)||0,state:{pagination:t,globalFilter:c,isLoading:u,showAlertBanner:s},onPaginationChange:e,onGlobalFilterChange:m,columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiToolbarAlertBannerProps:s?{color:"error",children:M||"Error loading Transaction List."}:void 0}),x=d.useCallback((l,L)=>{g(P=>({...P,[l]:L}))},[]);return a.jsxs(a.Fragment,{children:[a.jsx(o,{variant:"h5",fontWeight:700,fontSize:"1.8rem",mb:4,children:"Bonus List"}),a.jsxs(y,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},gap:2,flexWrap:"wrap",mb:4},children:[a.jsx(y,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:a.jsxs(h,{children:[a.jsx(D,{sx:{mb:.5,fontSize:12},children:"Payment Method"}),a.jsx(V,{items:K,value:r.paymentMethod,onChange:l=>x("paymentMethod",l.target.value),width:{xs:"100%",sm:200}})]})}),a.jsx(I,{dateAdapter:O,children:a.jsxs(y,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[a.jsxs(h,{children:[a.jsx(D,{sx:{mb:.5,fontSize:12},children:"From"}),a.jsx(b,{value:r.fromDate,onChange:l=>x("fromDate",l),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]}),a.jsxs(h,{children:[a.jsx(D,{sx:{mb:.5,fontSize:12},children:"To"}),a.jsx(b,{value:r.toDate,onChange:l=>x("toDate",l),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]})]})}),a.jsx(w,{control:a.jsx(H,{checked:r.isDeleted,onChange:l=>x("isDeleted",l.target.checked)}),label:"Show Deleted",sx:{alignSelf:"center"}})]}),a.jsx(h,{sx:{mt:4,borderRadius:2,overflow:"hidden"},children:a.jsx(G,{table:v})})]})};export{J as default};
