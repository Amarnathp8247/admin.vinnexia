import{r as x,W as y,ay as g,j as e,T as f,B as l,S as c,I as p,aI as j,aB as w,aC as b,aD as z,av as D,h as S}from"./index-oaA_Ltxz.js";import{f as a}from"./chunk-IHAWQA3S-C2e_0_q3.js";import{d as m}from"./dayjs.min-qfIxmpYN.js";import{F as T}from"./FileDownload-Cn3EXkSJ.js";import{u as h,w as k}from"./xlsx-D1NZSDnX.js";import{A as v}from"./AdapterDayjs-Dbd7Q14r.js";const C=(o=10)=>Array.from({length:o},(n,t)=>({id:t+1,login:a.number.int({min:1e5,max:999999}).toString(),date:a.date.recent().toLocaleDateString(),ticket:a.number.int({min:1e7,max:99999999}),symbol:a.finance.currencyCode(),price:a.finance.amount({min:1e3,max:3e3,dec:5}),profit:a.finance.amount({min:-1e3,max:2e3,dec:2}),volume:a.finance.amount({min:.01,max:5,dec:2}),commission:a.finance.amount({min:-20,max:0,dec:2}),expertPositionId:a.string.uuid(),entry:a.helpers.arrayElement(["In","Out"]),action:a.helpers.arrayElement(["Buy","Sell"]),comment:a.lorem.sentence()})),u=C(1),s=D(),F=[s.accessor("login",{header:"Login",size:100}),s.accessor("date",{header:"Date",size:120}),s.accessor("ticket",{header:"Ticket",size:120}),s.accessor("symbol",{header:"Symbol",size:100}),s.accessor("price",{header:"Price",size:120}),s.accessor("profit",{header:"Profit",size:100,Cell:({cell:o})=>e.jsx(f,{sx:{color:parseFloat(o.getValue())>=0?"green":"red",fontWeight:500},children:o.getValue()})}),s.accessor("volume",{header:"Volume",size:100}),s.accessor("commission",{header:"Commission",size:110}),s.accessor("expertPositionId",{header:"ExpertPosition ID",size:200}),s.accessor("entry",{header:"Entry",size:80}),s.accessor("action",{header:"Action",size:80}),s.accessor("comment",{header:"Comment",size:180,Cell:({cell:o})=>e.jsx(f,{sx:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:o.getValue()})})],I=o=>{const n=o.map(d=>d.original),t=h.json_to_sheet(n),i=h.book_new();h.book_append_sheet(i,t,"Sheet1"),k(i,"data.xlsx")};function W(){const[o,n]=x.useState(null),[t,i]=x.useState(null);y("(min-width:450px)"),x.useMemo(()=>!o||!t?u:u.filter(r=>m(r.date).isAfter(m(o).subtract(1,"day"))&&m(r.date).isBefore(m(t).add(1,"day"))),[o,t]);const d=g({columns:F,data:[],columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",renderTopToolbarCustomActions:({table:r})=>e.jsx(l,{sx:{display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap"},children:e.jsx(S,{variant:"contained",onClick:()=>I(u),startIcon:e.jsx(T,{sx:{color:"white"}}),sx:{textTransform:"none",color:"white",boxShadow:"none","&:hover":{boxShadow:"none"}},children:"Excel"})})});return e.jsxs(e.Fragment,{children:[e.jsx(f,{variant:"h5",fontWeight:"700",fontSize:"1.8rem",children:"History Report"}),e.jsxs(l,{sx:{mt:"2rem",display:"flex",flexDirection:{xs:"column",lg:"row"},gap:"1rem"},children:[e.jsx(l,{children:e.jsxs(c,{children:[e.jsx(p,{sx:{mb:".5rem",fontSize:"12px"},children:"MT5 ID:"}),e.jsx(j,{items:["1000","1001","1002"],selected:"1000",showDefaultOption:!1,width:{xs:"100%",sm:"200px"}})]})}),e.jsx(w,{dateAdapter:v,children:e.jsxs(l,{sx:{display:"flex",gap:"1rem",flexDirection:{xs:"column",sm:"row"}},children:[e.jsxs(c,{children:[e.jsx(p,{sx:{mb:".5rem",fontSize:"12px"},children:"From:"}),e.jsx(b,{value:o,onChange:r=>n(r),slotProps:{textField:{size:"small"}}})]}),e.jsxs(c,{children:[e.jsx(p,{sx:{mb:".5rem",fontSize:"12px"},children:"To:"}),e.jsx(b,{value:t,onChange:r=>i(r),slotProps:{textField:{size:"small"}}})]})]})})]}),e.jsx(c,{sx:{marginTop:"2rem",borderRadius:"1.2rem",overflow:"hidden"},children:e.jsx(z,{table:d})})]})}export{W as default};
