import{at as I,j as i,T as r,r as x,R as B,S as b,bF as N,c as v,h as C,$ as T,k as z,aW as F,bG as S,aw as E,B as P,aB as R}from"./index-Bjlp2vES.js";const s=I(),A=[s.display({id:"planName",header:"Plan Name",size:150,Cell:({row:e})=>i.jsx(r,{children:e.original.plan.planName})}),s.accessor("planType",{header:"Plan Type"}),s.display({id:"groupName",header:"Group Name",size:150,Cell:({row:e})=>i.jsx(r,{children:e.original.group.name})}),s.display({id:"groupType",header:"Group Type",size:150,Cell:({row:e})=>i.jsx(r,{children:e.original.group.type})}),s.accessor(e=>e.ib.userName,{id:"ibUserName",header:"IB Username",size:150,Cell:({row:e})=>{const m=`http://client.fxtrusts.com/accounts/signUp?referralCode=${e.original.ib.userName}`,t=e.original.ib.userName,[p,n]=x.useState(!1),l=d=>{navigator.clipboard.writeText(d),n(!0),setTimeout(()=>{n(!1)},1500)};return i.jsx(B,{title:p?"Copied!":"Copy",children:i.jsx(r,{onClick:()=>l(m),sx:{cursor:"pointer",color:"primary.main",fontWeight:"bold","&:hover":{color:"primary.dark"}},children:t})})}}),s.accessor(e=>e.ib.name,{id:"ibName",header:"IB Name",size:150,Cell:({row:e})=>i.jsx(r,{children:e.original.ib.name})}),s.accessor(e=>e.ib.email,{id:"ibEmail",header:"IB Email",size:150,Cell:({row:e})=>i.jsx(r,{children:e.original.ib.email})}),s.accessor("cfdMetals",{header:"CFD Metals",size:150,Cell:({row:e})=>{var a;return i.jsx(r,{children:((a=e.original.cfdMetals)==null?void 0:a.length)>0?"Allowed":"Not-allowed"})}}),s.accessor("cfdFx",{header:"CFD FX",size:150,Cell:({row:e})=>{var a;return i.jsx(r,{children:((a=e.original.cfdFx)==null?void 0:a.length)>0?"Allowed":"Not-allowed"})}}),s.accessor("symbolExtension",{header:"Symbol Extension",size:150}),s.accessor("ibComission",{header:"IB Commission",size:100}),s.accessor("status",{header:"Status",size:150,Cell:({row:e})=>{const a=e.original.isDeleted;return i.jsx(b,{sx:{flexDirection:"row",gap:"10px",color:a?"red":"green"},children:a?"Inactive":"Active"})}}),s.accessor("action",{header:"Action",size:150,Cell:({row:e})=>{var c;const a=(c=e==null?void 0:e.original)==null?void 0:c.groupId,m=e.original.id,t=e.original.isDeleted,[p,{isLoading:n}]=N(),l=v(),d=async()=>{var u,g;try{const o=await p({isDeleted:!t,planId:m,groupId:a}).unwrap();o!=null&&o.status&&l(z({open:!0,message:o==null?void 0:o.message,severity:"success"}))}catch(o){(u=o==null?void 0:o.data)!=null&&u.status||l(z({open:!0,message:((g=o==null?void 0:o.data)==null?void 0:g.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return i.jsxs(b,{sx:{flexDirection:"row",gap:"10px"},children:[i.jsx(C,{component:T,to:`/admin/IBManagement/editCommissionGroup/${e.original.id}`,variant:"contained",sx:{textTransform:"none",color:"white",fontSize:"0.7rem",px:"8px",py:"4px"},children:"Edit"}),i.jsx(C,{onClick:d,type:"submit",variant:"contained",disabled:n,sx:{textTransform:"none",color:"white",fontSize:"0.7rem",px:"8px",py:"4px"},children:t?"Recover":"Delete"})]})}})];function G(){var f,y,j;const{id:e}=F(),[a,m]=x.useState({pageIndex:0,pageSize:10}),[t,p]=x.useState(""),{data:n,isLoading:l,isError:d,error:c}=S({page:a.pageIndex+1,sizePerPage:a.pageSize,search:t,ibId:e}),u=(f=c==null?void 0:c.data)==null?void 0:f.message,g=((y=n==null?void 0:n.data)==null?void 0:y.ibPlanList)||[],o=E({columns:A,data:g,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:((j=n==null?void 0:n.data)==null?void 0:j.totalRecords)||0,state:{pagination:a,globalFilter:t,isLoading:l,showAlertBanner:d},onPaginationChange:m,onGlobalFilterChange:p,columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiTableBodyRowProps:({row:h})=>({sx:{backgroundColor:h.original.isDeleted&&"#ffebee",color:h.original.isDeleted?"red":"inherit","&:hover":{backgroundColor:h.original.isDeleted&&"#ffcdd2"}}}),muiToolbarAlertBannerProps:d?{color:"error",children:u||"Error loading Commission Group List."}:void 0});return i.jsxs(i.Fragment,{children:[!e&&i.jsx(r,{variant:"h5",fontWeight:"700",fontSize:"1.8rem",mb:"2rem",children:"Commission List"}),i.jsx(P,{sx:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:!e&&i.jsx(C,{component:T,to:"/admin/IBManagement/addCommissionGroup",variant:"contained",sx:{textTransform:"capitalize",boxShadow:"none",color:"white","&:hover":{boxShadow:"none"}},children:"Add Commission"})}),i.jsx(b,{sx:{marginTop:"2rem",borderRadius:"1.2rem",overflow:"hidden"},children:i.jsx(R,{table:o})})]})}export{G as default};
