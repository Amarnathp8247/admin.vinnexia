import{av as E,j as s,T as l,aX as k,c as U,r,bD as W,ay as H,B as j,S as u,I as p,e as G,aB as N,aC as y,aD as V}from"./index-oaA_Ltxz.js";import{d as T}from"./dayjs.min-qfIxmpYN.js";import{A as Q}from"./AdapterDayjs-Dbd7Q14r.js";const o=E(),X=[o.accessor("loginId",{header:"MT5 Login ID",size:100}),o.display({id:"PositionID",header:"Position ID",Cell:({row:e})=>{var i,a;return s.jsx(l,{children:(a=(i=e==null?void 0:e.original)==null?void 0:i.orderDetails)==null?void 0:a.PositionID})},size:100}),o.display({id:"name",header:"From User",Cell:({row:e})=>{var i,a;return s.jsx(l,{children:(a=(i=e==null?void 0:e.original)==null?void 0:i.fromUserDetails)==null?void 0:a.name})},size:100}),o.accessor("symbol",{header:"Symbol",size:100}),o.display({id:"action",header:"Action",Cell:({row:e})=>{var i,a,d,c;return s.jsx(l,{sx:{color:((a=(i=e==null?void 0:e.original)==null?void 0:i.orderDetails)==null?void 0:a.Action)==1?"green":"red"},children:((c=(d=e==null?void 0:e.original)==null?void 0:d.orderDetails)==null?void 0:c.Action)==1?"Buy":"Sell"})},size:100}),o.display({id:"price",header:"Price",Cell:({row:e})=>{var i,a;return s.jsx(l,{children:(a=(i=e==null?void 0:e.original)==null?void 0:i.orderDetails)==null?void 0:a.Price})},size:100}),o.display({id:"ProfitRaw",header:"Profit",Cell:({row:e})=>{var i,a;return s.jsx(l,{children:(a=(i=e==null?void 0:e.original)==null?void 0:i.orderDetails)==null?void 0:a.ProfitRaw})},size:100}),o.display({id:"volume",header:"Volume",Cell:({row:e})=>{var i,a;return s.jsx(l,{children:((a=(i=e==null?void 0:e.original)==null?void 0:i.orderDetails)==null?void 0:a.Volume)/1e4})},size:100}),o.accessor("comissionAmount",{header:"Comission amount",size:100,Cell:({row:e})=>{var a;const i=(a=e==null?void 0:e.original)==null?void 0:a.comissionAmount;return Number(i||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4})}}),o.display({id:"level",header:"Level",Cell:({row:e})=>{var i,a;return s.jsx(l,{children:(a=(i=e==null?void 0:e.original)==null?void 0:i.orderDetails)==null?void 0:a.level})},size:100}),o.accessor("TimeCreate",{header:"Created AT",size:200,Cell:({row:e})=>{const i=e.original.orderDetails.Time,d=new Date(i*1e3).toLocaleString("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(",","");return s.jsx(l,{children:d})}})];function O(){var C,b;const{id:e}=k();U();const[i,a]=r.useState({pageIndex:0,pageSize:10}),[d,c]=r.useState(""),[x,z]=r.useState(""),[m,S]=r.useState({status:"",transactionType:"",paymentMethod:"",fromDate:null,toDate:null}),F=m.fromDate?T(m.fromDate).format("YYYY-MM-DD"):void 0,P=m.toDate?T(m.toDate).format("YYYY-MM-DD"):void 0,{data:n,isLoading:v,isError:g,error:h}=W({page:i.pageIndex+1,sizePerPage:i.pageSize,search:d,searchWithLogin:x,ibId:e,...m,fromDate:F,toDate:P},{skip:!e}),A=(C=h==null?void 0:h.data)==null?void 0:C.message,D=((b=n==null?void 0:n.data)==null?void 0:b.comissionTrxList)||[],L=r.useMemo(()=>X,[]),M=r.useMemo(()=>D,[D]),I=r.useMemo(()=>{var t;return((t=n==null?void 0:n.data)==null?void 0:t.totalRecords)||0},[n]),B=H({columns:L,data:g?[]:M,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:I,state:{pagination:i,globalFilter:d,isLoading:v,showAlertBanner:g},onPaginationChange:a,onGlobalFilterChange:c,columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",renderTopToolbarCustomActions:()=>{var t;return s.jsxs(l,{p:".5rem",fontSize:"1rem",fontWeight:700,color:"primary.main",children:["Total commission : ",Number(((t=n==null?void 0:n.data)==null?void 0:t.totalComission)||0).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2})]})},muiToolbarAlertBannerProps:g?{color:"error",children:A||"Error loading transactions."}:void 0}),f=r.useCallback((t,R)=>{S(Y=>({...Y,[t]:R}))},[]);return s.jsxs(s.Fragment,{children:[s.jsxs(j,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},gap:2,flexWrap:"wrap",my:4},children:[s.jsxs(u,{children:[s.jsx(p,{sx:{mb:.5,fontSize:12},children:"Search with Login"}),s.jsx(G,{size:"small",placeholder:"Enter MT5 login ID",value:x,onChange:t=>z(t.target.value),sx:{width:{xs:"100%",sm:250}}})]}),s.jsx(N,{dateAdapter:Q,children:s.jsxs(j,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[s.jsxs(u,{children:[s.jsx(p,{sx:{mb:.5,fontSize:12},children:"From"}),s.jsx(y,{value:m.fromDate,onChange:t=>f("fromDate",t),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]}),s.jsxs(u,{children:[s.jsx(p,{sx:{mb:.5,fontSize:12},children:"To"}),s.jsx(y,{value:m.toDate,onChange:t=>f("toDate",t),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]})]})})]}),s.jsx(u,{sx:{marginTop:"2rem",borderRadius:"1.2rem",overflow:"hidden"},children:s.jsx(V,{table:B})})]})}export{O as default};
