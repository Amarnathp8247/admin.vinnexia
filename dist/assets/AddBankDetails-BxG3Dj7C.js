import{o as B,aM as F,s as d,aC as T,aK as w,aN as P,c as D,r as E,av as L,a as W,aO as O,j as e,S as V,T as n,aF as $,G as i,I as o,e as c,h as G,b as U,k as S}from"./index-B_S0l-pH.js";import{S as Z}from"./SearchableDropdown-BTGFcKz7.js";import{a as q}from"./allCountryName-B6BN2SR9.js";import{F as M}from"./FileUploadTextArea-C_sj0ezS.js";import{S as R}from"./SearchableSelector-C9pLKMko.js";import{C as _}from"./Card-BbyUSaIa.js";const p=a=>F(l=>l===""||l===null?void 0:l,a.optional()),J=B({userId:T({required_error:"Client is required"}).nullable().refine(a=>a!==null,{message:"Client is required"}),holderName:d().min(1,"Please type account holder name").min(3,"Account holder name must be at least 3 characters long"),bankName:d().min(2,"Please select your bank name"),accountNo:d().min(1,"Please type your account number").min(8,"Account number must be at least 8 characters").max(17,"Invalid Account number").regex(/^\d+$/,"Account number must contain only numbers"),ifscCode:p(d().min(1,"Please type your IFSC code").length(11,"IFSC code must be exactly 11 characters").regex(/^[A-Z]{4}0[A-Z0-9]{6}$/,"Invalid IFSC code")),ibanNo:p(d().regex(/^[A-Z]{2}\d{2}[A-Z0-9]{11,30}$/,"Invalid IBAN format").min(15,"IBAN must be at least 15 characters").max(34,"IBAN cannot exceed 34 characters").or(P(""))),bankAddress:d().trim().min(1,"Please select your bank address"),country:d().trim().min(1,"Please select your country"),image:p(w(File,{message:"Please upload a valid image file"}).refine(a=>a&&["image/jpeg","image/png"].includes(a.type),{message:"Only JPEG or PNG images are allowed"}).refine(a=>a&&a.size<=5*1024*1024,{message:"Image size must not exceed 5MB"}))}).transform(a=>Object.fromEntries(Object.entries(a).filter(([l,u])=>u!==void 0)));function se(){var f;const a=D(),[l,u]=E.useState(""),{data:x,isLoading:N}=L({page:1,sizePerPage:5,search:l},{skip:l.length<3}),z=l.length>=3?((f=x==null?void 0:x.data)==null?void 0:f.usersList)||[]:[],g={userId:null,holderName:"",accountNo:"",ifscCode:"",ibanNo:"",bankName:"",bankAddress:"",country:"",image:null},{register:m,handleSubmit:C,reset:k,watch:b,setValue:h,formState:{errors:s}}=W({resolver:U(J),defaultValues:g}),[A,{isLoading:I}]=O(),v=async r=>{var j,y;try{const t=await A(r).unwrap();t!=null&&t.status&&(a(S({open:!0,message:t==null?void 0:t.message,severity:"success"})),k(g))}catch(t){(j=t==null?void 0:t.data)!=null&&j.status||a(S({open:!0,message:((y=t==null?void 0:t.data)==null?void 0:y.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(V,{children:[e.jsx(n,{sx:{fontSize:"2rem",fontWeight:"700",mb:"2rem"},children:"Add User Bank Details"}),e.jsxs(_,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"}},component:"form",onSubmit:C(v),children:[e.jsx(n,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx($,{sx:{my:"1.2rem"}}),e.jsxs(i,{container:!0,size:12,spacing:3,children:[e.jsxs(i,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(o,{sx:{mb:".5rem"},children:"Select Client *"}),e.jsx(R,{width:"100%",items:z.map(r=>({value:r.id,name:`${r.name} (${r.email})`})),value:b("userId"),onChange:r=>h("userId",r,{shouldValidate:!0}),onSearchChange:r=>u(r),isLoading:N,shouldBeFullwidth:!0}),e.jsx(o,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),s.userId&&e.jsx(n,{color:"error",fontSize:"14px",children:s.userId.message})]}),e.jsxs(i,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(o,{sx:{mb:".5rem"},children:"Account holder Name *"}),e.jsx(c,{...m("holderName"),size:"small",fullWidth:!0,placeholder:"Enter account Name",variant:"outlined"}),s.holderName&&e.jsx(n,{color:"error",fontSize:"14px",children:s.holderName.message})]}),e.jsxs(i,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(o,{sx:{mb:".5rem"},children:"Account No. *"}),e.jsx(c,{...m("accountNo"),size:"small",fullWidth:!0,placeholder:"Enter account No.",variant:"outlined"}),s.accountNo&&e.jsx(n,{color:"error",fontSize:"14px",children:s.accountNo.message})]}),e.jsxs(i,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(o,{sx:{mb:".5rem"},children:"IFSC/Swift Code *"}),e.jsx(c,{...m("ifscCode"),size:"small",fullWidth:!0,placeholder:"Enter IFSC/Swift Code",variant:"outlined"}),s.ifscCode&&e.jsx(n,{color:"error",fontSize:"14px",children:s.ifscCode.message})]}),e.jsxs(i,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(o,{sx:{mb:".5rem"},children:"IBAN No."}),e.jsx(c,{...m("ibanNo"),size:"small",fullWidth:!0,placeholder:"Enter IBAN No.",variant:"outlined"}),s.ibanNo&&e.jsx(n,{color:"error",fontSize:"14px",children:s.ibanNo.message})]}),e.jsxs(i,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(o,{sx:{mb:".5rem"},children:"Bank Name *"}),e.jsx(c,{...m("bankName"),size:"small",fullWidth:!0,placeholder:"Enter bank name",variant:"outlined"}),s.bankName&&e.jsx(n,{color:"error",fontSize:"14px",children:s.bankName.message})]}),e.jsxs(i,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(o,{sx:{mb:".5rem"},children:"Bank address *"}),e.jsx(c,{...m("bankAddress"),size:"small",fullWidth:!0,placeholder:"Enter bank address",variant:"outlined"}),s.bankAddress&&e.jsx(n,{color:"error",fontSize:"14px",children:s.bankAddress.message})]}),e.jsxs(i,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(o,{sx:{mb:".5rem"},children:"Country *"}),e.jsx(Z,{options:q,placeholder:"Select Country",value:b("country"),onChange:r=>h("country",r,{shouldValidate:!0})}),s.country&&e.jsx(n,{color:"error",fontSize:"14px",children:s.country.message})]}),e.jsxs(i,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(o,{sx:{mb:".5rem"},children:"Book Bank *"}),e.jsx(M,{onChange:r=>h("image",r,{shouldValidate:!0}),extentionType:["image/jpeg","image/png"],acceptType:"image/jpeg,image/png,application/pdf"}),s.image&&e.jsx(n,{color:"error",fontSize:"14px",children:s.image.message})]})]}),e.jsx(G,{type:"submit",variant:"contained",disabled:I,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{se as default};
