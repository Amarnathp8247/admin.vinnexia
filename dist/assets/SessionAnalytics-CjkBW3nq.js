import{Q as me,j as e,r as f,z as C,A as y,J as G,d1 as T,bt as S,bm as c,H as w,F as R,K as z,T as l,d2 as ue,n as B,B as m,S as h,cH as F,ap as j,ak as b,G as p,aF as ie,aW as he,d3 as je}from"./index-Bjlp2vES.js";import{C as A}from"./Card--HSV-vWh.js";import{A as E}from"./Avatar-TT7_qFMD.js";import{E as se,P as re}from"./Phone-CeJm8Aka.js";import{A as P,D as le}from"./Dns-BMRJ5rSu.js";import{W as ae,T as O,a as ce}from"./Web-BaRy6nqn.js";import{P as xe}from"./Public-BcB6hwtQ.js";import{P as de}from"./Person-DVyFyRd8.js";import{L as fe}from"./Language-8bZsZRLb.js";const U=me(e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),pe=me(e.jsx("path",{d:"M17 1.01 7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99M17 19H7V5h10z"}),"Smartphone"),k=f.createContext({});function ge(o){return C("MuiTimeline",o)}y("MuiTimeline",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]);function $(o){return o==="alternate-reverse"?"positionAlternateReverse":`position${G(o)}`}const ve=["position","className"],be=o=>{const{position:n,classes:i}=o,t={root:["root",n&&$(n)]};return z(t,ge,i)},ye=w("ul",{name:"MuiTimeline",slot:"Root",overridesResolver:(o,n)=>{const{ownerState:i}=o;return[n.root,i.position&&n[$(i.position)]]}})({display:"flex",flexDirection:"column",padding:"6px 16px",flexGrow:1}),Ce=f.forwardRef(function(n,i){const t=T({props:n,name:"MuiTimeline"}),{position:s="right",className:r}=t,a=S(t,ve),x=c({},t,{position:s}),u=be(x),g=f.useMemo(()=>({position:s}),[s]);return e.jsx(k.Provider,{value:g,children:e.jsx(ye,c({className:R(u.root,r),ownerState:x,ref:i},a))})});function Te(o){return C("MuiTimelineConnector",o)}y("MuiTimelineConnector",["root"]);const Se=["className"],we=o=>{const{classes:n}=o;return z({root:["root"]},Te,n)},Re=w("span",{name:"MuiTimelineConnector",slot:"Root",overridesResolver:(o,n)=>n.root})(({theme:o})=>({width:2,backgroundColor:(o.vars||o).palette.grey[400],flexGrow:1})),ze=f.forwardRef(function(n,i){const t=T({props:n,name:"MuiTimelineConnector"}),{className:s}=t,r=S(t,Se),a=t,x=we(a);return e.jsx(Re,c({className:R(x.root,s),ownerState:a,ref:i},r))});function $e(o){return C("MuiTimelineContent",o)}const Me=y("MuiTimelineContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),Ae=["className"],De=o=>{const{position:n,classes:i}=o,t={root:["root",$(n)]};return z(t,$e,i)},Ie=w(l,{name:"MuiTimelineContent",slot:"Root",overridesResolver:(o,n)=>{const{ownerState:i}=o;return[n.root,n[$(i.position)]]}})(({ownerState:o})=>c({flex:1,padding:"6px 16px",textAlign:"left"},o.position==="left"&&{textAlign:"right"})),Ne=f.forwardRef(function(n,i){const t=T({props:n,name:"MuiTimelineContent"}),{className:s}=t,r=S(t,Ae),{position:a}=f.useContext(k),x=c({},t,{position:a||"right"}),u=De(x);return e.jsx(Ie,c({component:"div",className:R(u.root,s),ownerState:x,ref:i},r))});function We(o){return C("MuiTimelineDot",o)}y("MuiTimelineDot",["root","filled","outlined","filledGrey","outlinedGrey","filledPrimary","outlinedPrimary","filledSecondary","outlinedSecondary"]);const Pe=["className","color","variant"],Ue=o=>{const{color:n,variant:i,classes:t}=o,s={root:["root",i,n!=="inherit"&&`${i}${G(n)}`]};return z(s,We,t)},ke=w("span",{name:"MuiTimelineDot",slot:"Root",overridesResolver:(o,n)=>{const{ownerState:i}=o;return[n.root,n[i.color!=="inherit"&&`${i.variant}${G(i.color)}`],n[i.variant]]}})(({ownerState:o,theme:n})=>c({display:"flex",alignSelf:"baseline",borderStyle:"solid",borderWidth:2,padding:4,borderRadius:"50%",boxShadow:(n.vars||n).shadows[1],margin:"11.5px 0"},o.variant==="filled"&&c({borderColor:"transparent"},o.color!=="inherit"&&c({},o.color==="grey"?{color:(n.vars||n).palette.grey[50],backgroundColor:(n.vars||n).palette.grey[400]}:{color:(n.vars||n).palette[o.color].contrastText,backgroundColor:(n.vars||n).palette[o.color].main})),o.variant==="outlined"&&c({boxShadow:"none",backgroundColor:"transparent"},o.color!=="inherit"&&c({},o.color==="grey"?{borderColor:(n.vars||n).palette.grey[400]}:{borderColor:(n.vars||n).palette[o.color].main})))),Fe=f.forwardRef(function(n,i){const t=T({props:n,name:"MuiTimelineDot"}),{className:s,color:r="grey",variant:a="filled"}=t,x=S(t,Pe),u=c({},t,{color:r,variant:a}),g=Ue(u);return e.jsx(ke,c({className:R(g.root,s),ownerState:u,ref:i},x))}),Oe=y("MuiTimelineOppositeContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]);function _e(o){return C("MuiTimelineItem",o)}y("MuiTimelineItem",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse","missingOppositeContent"]);const Ge=["position","className"],Be=o=>{const{position:n,classes:i,hasOppositeContent:t}=o,s={root:["root",$(n),!t&&"missingOppositeContent"]};return z(s,_e,i)},Ee=w("li",{name:"MuiTimelineItem",slot:"Root",overridesResolver:(o,n)=>{const{ownerState:i}=o;return[n.root,n[$(i.position)]]}})(({ownerState:o})=>c({listStyle:"none",display:"flex",position:"relative",minHeight:70},o.position==="left"&&{flexDirection:"row-reverse"},(o.position==="alternate"||o.position==="alternate-reverse")&&{[`&:nth-of-type(${o.position==="alternate"?"even":"odd"})`]:{flexDirection:"row-reverse",[`& .${Me.root}`]:{textAlign:"right"},[`& .${Oe.root}`]:{textAlign:"left"}}},!o.hasOppositeContent&&{"&::before":{content:'""',flex:1,padding:"6px 16px"}})),Ve=f.forwardRef(function(n,i){const t=T({props:n,name:"MuiTimelineItem"}),{position:s,className:r}=t,a=S(t,Ge),{position:x}=f.useContext(k);let u=!1;f.Children.forEach(t.children,N=>{ue(N,["TimelineOppositeContent"])&&(u=!0)});const g=c({},t,{position:s||x||"right",hasOppositeContent:u}),D=Be(g),I=f.useMemo(()=>({position:g.position}),[g.position]);return e.jsx(k.Provider,{value:I,children:e.jsx(Ee,c({className:R(D.root,r),ownerState:g,ref:i},a))})});function Le(o){return C("MuiTimelineSeparator",o)}y("MuiTimelineSeparator",["root"]);const He=["className"],Ye=o=>{const{classes:n}=o;return z({root:["root"]},Le,n)},qe=w("div",{name:"MuiTimelineSeparator",slot:"Root",overridesResolver:(o,n)=>n.root})({display:"flex",flexDirection:"column",flex:0,alignItems:"center"}),Qe=f.forwardRef(function(n,i){const t=T({props:n,name:"MuiTimelineSeparator"}),{className:s}=t,r=S(t,He),a=t,x=Ye(a);return e.jsx(qe,c({className:R(x.root,s),ownerState:a,ref:i},r))}),_=({title:o,icon:n,children:i,loading:t})=>{const s=B();return e.jsxs(A,{sx:{p:3,height:"100%",borderRadius:"24px",boxShadow:s.shadows[3],transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:s.shadows[8]}},children:[e.jsxs(h,{direction:"row",spacing:1.5,alignItems:"center",mb:2.5,children:[e.jsx(E,{sx:{bgcolor:b(s.palette.primary.main,.1),color:s.palette.primary.main,width:40,height:40},children:n}),e.jsx(l,{variant:"h6",fontWeight:700,children:o})]}),e.jsx(h,{spacing:2,children:t?e.jsxs(e.Fragment,{children:[e.jsx(j,{height:24,width:"80%"}),e.jsx(j,{height:24,width:"60%"}),e.jsx(j,{height:24,width:"70%"})]}):i})]})},M=({label:o,value:n,icon:i,color:t="primary",isLoading:s})=>{const r=B();return e.jsxs(A,{sx:{p:2.5,height:"100%",borderRadius:"20px",boxShadow:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",bgcolor:b(r.palette[t].main,.04),border:`1px solid ${b(r.palette[t].main,.1)}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${b(r.palette[t].main,.15)}`,bgcolor:b(r.palette[t].main,.08)}},children:[e.jsx(E,{sx:{bgcolor:b(r.palette[t].main,.1),color:r.palette[t].main,mb:1.5,width:48,height:48},children:i}),e.jsx(l,{variant:"h5",fontWeight:800,color:"text.primary",mb:.5,children:s?e.jsx(j,{width:60}):n}),e.jsx(l,{variant:"body2",color:"text.secondary",fontWeight:500,children:o})]})},v=({icon:o,label:n,value:i})=>e.jsxs(h,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(m,{sx:{color:"text.secondary",display:"flex"},children:o}),e.jsxs(m,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",display:"block",children:n}),e.jsx(l,{variant:"body2",fontWeight:600,color:"text.primary",children:i||"N/A"})]})]});function Je({data:o,isLoading:n}){var x,u,g,D,I,N,V,L,H,Y,q,Q,J,K,X,Z,ee,te,oe;const i=B(),t=o==null?void 0:o.session,s=(o==null?void 0:o.screenFlow)||[],r=(o==null?void 0:o.metrics)||{},a=d=>d>30?"error":d>10?"warning":"success";return e.jsxs(m,{children:[e.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:4,children:[e.jsxs(m,{children:[e.jsx(l,{variant:"h4",fontWeight:800,sx:{background:`linear-gradient(45deg, ${i.palette.primary.main}, ${i.palette.secondary.main})`,backgroundClip:"text",textFillColor:"transparent",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:1},children:"Session Details"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Comprehensive analytics and user journey flow"})]}),e.jsx(F,{label:n?e.jsx(j,{width:60}):(x=t==null?void 0:t.status)==null?void 0:x.toUpperCase(),color:(t==null?void 0:t.status)==="active"?"success":"default",sx:{fontWeight:700,borderRadius:"12px",height:32,px:1}})]}),e.jsx(A,{sx:{p:0,mb:4,borderRadius:"24px",boxShadow:i.shadows[4],overflow:"hidden"},children:e.jsx(m,{sx:{background:`linear-gradient(135deg, ${b(i.palette.primary.main,.05)} 0%, ${b(i.palette.background.paper,1)} 100%)`,p:3},children:e.jsxs(p,{container:!0,spacing:4,alignItems:"center",children:[e.jsx(p,{size:{xs:12,md:6},children:e.jsxs(h,{direction:"row",spacing:3,alignItems:"center",children:[n?e.jsx(j,{variant:"circular",width:80,height:80}):e.jsx(E,{src:(u=t==null?void 0:t.user)==null?void 0:u.avatar,sx:{width:80,height:80,boxShadow:i.shadows[3],border:`4px solid ${i.palette.background.paper}`}}),e.jsxs(m,{children:[e.jsx(l,{variant:"h5",fontWeight:700,gutterBottom:!0,children:n?e.jsx(j,{width:200}):(g=t==null?void 0:t.user)==null?void 0:g.name}),e.jsxs(h,{direction:"row",spacing:2,divider:e.jsx(ie,{orientation:"vertical",flexItem:!0}),children:[e.jsxs(m,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(se,{fontSize:"small",color:"action"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:n?e.jsx(j,{width:150}):(D=t==null?void 0:t.user)==null?void 0:D.email})]}),e.jsxs(m,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(re,{fontSize:"small",color:"action"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:n?e.jsx(j,{width:120}):(I=t==null?void 0:t.user)==null?void 0:I.phone})]})]})]})]})}),e.jsx(p,{size:{xs:12,md:6},children:e.jsxs(h,{direction:{xs:"column",sm:"row"},spacing:3,justifyContent:{xs:"flex-start",md:"flex-end"},children:[e.jsxs(m,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"Session Started"}),e.jsxs(h,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(P,{color:"primary",fontSize:"small"}),e.jsx(l,{variant:"subtitle1",fontWeight:600,children:n?e.jsx(j,{width:150}):new Date(t==null?void 0:t.startTime).toLocaleString()})]})]}),e.jsxs(m,{children:[e.jsx(l,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"IP Address"}),e.jsxs(h,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(le,{color:"secondary",fontSize:"small"}),e.jsx(l,{variant:"subtitle1",fontWeight:600,children:n?e.jsx(j,{width:120}):t==null?void 0:t.ip})]})]})]})})]})})}),e.jsx(l,{variant:"h6",fontWeight:700,mb:2,children:"Session Metrics"}),e.jsxs(p,{container:!0,spacing:2,mb:4,children:[e.jsx(p,{size:{xs:6,sm:4,md:2.4},children:e.jsx(M,{label:"Total Screens",value:r.totalScreens,icon:e.jsx(ae,{}),color:"primary"})}),e.jsx(p,{size:{xs:6,sm:4,md:2.4},children:e.jsx(M,{label:"Unique Screens",value:r.uniqueScreens,icon:e.jsx(xe,{}),color:"info"})}),e.jsx(p,{size:{xs:6,sm:4,md:2.4},children:e.jsx(M,{label:"Total Actions",value:r.totalActions,icon:e.jsx(O,{}),color:"warning"})}),e.jsx(p,{size:{xs:6,sm:4,md:2.4},children:e.jsx(M,{label:"Avg Duration",value:`${r.avgScreenDuration||0}s`,icon:e.jsx(ce,{}),color:"success"})}),e.jsx(p,{size:{xs:6,sm:4,md:2.4},children:e.jsx(M,{label:"Total Duration",value:`${r.totalDuration||0}s`,icon:e.jsx(P,{}),color:"secondary"})})]}),e.jsxs(p,{container:!0,spacing:3,mb:4,children:[e.jsx(p,{size:{xs:12,md:4},children:e.jsxs(_,{title:"User Information",icon:e.jsx(de,{}),loading:n,children:[e.jsx(v,{icon:e.jsx(se,{fontSize:"small"}),label:"Email Address",value:(N=t==null?void 0:t.user)==null?void 0:N.email}),e.jsx(v,{icon:e.jsx(re,{fontSize:"small"}),label:"Phone Number",value:(V=t==null?void 0:t.user)==null?void 0:V.phone}),e.jsx(v,{icon:e.jsx(de,{fontSize:"small"}),label:"First Session",value:t!=null&&t.isFirstSession?"Yes":"No"})]})}),e.jsx(p,{size:{xs:12,md:4},children:e.jsxs(_,{title:"Device Details",icon:e.jsx(pe,{}),loading:n,children:[e.jsx(v,{icon:e.jsx(pe,{fontSize:"small"}),label:"Device",value:`${((L=t==null?void 0:t.device)==null?void 0:L.manufacturer)||""} ${((H=t==null?void 0:t.device)==null?void 0:H.model)||""}`}),e.jsx(v,{icon:e.jsx(le,{fontSize:"small"}),label:"Operating System",value:`${((Y=t==null?void 0:t.device)==null?void 0:Y.os)||""} ${((q=t==null?void 0:t.device)==null?void 0:q.osVersion)||""}`}),e.jsx(v,{icon:e.jsx(fe,{fontSize:"small"}),label:"Browser",value:(Q=t==null?void 0:t.device)==null?void 0:Q.browser}),e.jsx(v,{icon:e.jsx(O,{fontSize:"small"}),label:"App Version",value:(J=t==null?void 0:t.device)==null?void 0:J.appVersion})]})}),e.jsx(p,{size:{xs:12,md:4},children:e.jsxs(_,{title:"Location Data",icon:e.jsx(U,{}),loading:n,children:[e.jsx(v,{icon:e.jsx(U,{fontSize:"small"}),label:"City, State",value:`${((K=t==null?void 0:t.location)==null?void 0:K.city)||""}, ${((X=t==null?void 0:t.location)==null?void 0:X.state)||""}`}),e.jsx(v,{icon:e.jsx(xe,{fontSize:"small"}),label:"Country",value:(Z=t==null?void 0:t.location)==null?void 0:Z.country}),e.jsx(v,{icon:e.jsx(P,{fontSize:"small"}),label:"Timezone",value:(ee=t==null?void 0:t.location)==null?void 0:ee.timezone}),e.jsx(v,{icon:e.jsx(U,{fontSize:"small"}),label:"Coordinates",value:`Lat: ${((te=t==null?void 0:t.location)==null?void 0:te.lat)||"-"}, Lng: ${((oe=t==null?void 0:t.location)==null?void 0:oe.lng)||"-"}`})]})})]}),e.jsxs(A,{sx:{p:4,borderRadius:"24px",boxShadow:i.shadows[3]},children:[e.jsx(l,{variant:"h6",fontWeight:700,mb:3,children:"Screen Interaction Flow"}),n?Array.from({length:4}).map((d,W)=>e.jsx(j,{height:80,sx:{mb:2}},W)):e.jsx(Ce,{position:"right",sx:{p:0,m:0},children:s.map((d,W)=>{var ne;return e.jsxs(Ve,{sx:{"&:before":{display:"none"}},children:[e.jsxs(Qe,{children:[e.jsx(Fe,{color:a(d.duration),sx:{p:1,boxShadow:"none"},children:e.jsx(ae,{sx:{fontSize:16}})}),W!==s.length-1&&e.jsx(ze,{sx:{bgcolor:b(i.palette.text.secondary,.2)}})]}),e.jsx(Ne,{sx:{py:2,px:3},children:e.jsxs(A,{sx:{p:2.5,borderRadius:"16px",bgcolor:b(i.palette[a(d.duration)].main,.04),border:`1px solid ${b(i.palette[a(d.duration)].main,.1)}`},children:[e.jsxs(h,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:1,children:[e.jsx(l,{variant:"subtitle1",fontWeight:700,children:d.screenName}),e.jsxs(h,{direction:"row",spacing:1,children:[e.jsx(F,{icon:e.jsx(P,{sx:{fontSize:"14px !important"}}),label:`${d.duration}s`,size:"small",color:a(d.duration),variant:"outlined"}),e.jsx(F,{label:d.navigationMethod||"auto",size:"small",sx:{borderRadius:"6px"}})]})]}),e.jsx(l,{variant:"body2",color:"text.secondary",mb:2,sx:{fontFamily:"monospace",fontSize:"12px"},children:d.screenRoute}),e.jsx(ie,{sx:{my:1.5,borderStyle:"dashed"}}),e.jsxs(h,{direction:"row",spacing:3,flexWrap:"wrap",useFlexGap:!0,children:[e.jsxs(m,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(U,{sx:{fontSize:16,color:"text.secondary"}}),e.jsx(l,{variant:"caption",children:((ne=d.location)==null?void 0:ne.city)||"Unknown"})]}),e.jsxs(m,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(ce,{sx:{fontSize:16,color:"text.secondary"}}),e.jsxs(l,{variant:"caption",children:["Load: ",d.loadTime??"N/A"," ms"]})]}),e.jsxs(m,{display:"flex",alignItems:"center",gap:.5,children:[e.jsx(O,{sx:{fontSize:16,color:"text.secondary"}}),e.jsxs(l,{variant:"caption",children:[d.actions," actions"]})]})]})]})})]},d.step||W)})})]})]})}function rt(){const{id:o}=he(),{data:n,isLoading:i}=je(o);return e.jsx(Je,{data:n==null?void 0:n.data,isLoading:i})}export{rt as default};
