import{o as v,aM as I,s as c,c as $,r as C,aI as F,a as q,b1 as D,j as e,S as A,T as o,aF as Z,G as i,I as l,e as p,h as k,b as E,k as g}from"./index-Bjlp2vES.js";import{S as V}from"./SearchableSelector-C6ndV5ZN.js";import{C as W}from"./Card--HSV-vWh.js";const b=a=>I(t=>t===""||t===null?void 0:t,a.optional()),B=v({mt5Login:c({required_error:"MT5 Login is required"}).nullable().refine(a=>a!==null,{message:"MT5 Login is required"}),PassMain:b(c().min(8,"Main password must be at least 8 characters").refine(a=>/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/.test(a),{message:"Main password must include at least one uppercase letter, one lowercase letter, one number, and one special character (!@#$%^&*)"})),PassInvestor:b(c().min(8,"Investor password must be at least 8 characters").refine(a=>/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/.test(a),{message:"Investor password must include at least one uppercase letter, one lowercase letter, one number, and one special character (!@#$%^&*)"}))});function U(){const a=$(),[t,f]=C.useState(""),{data:d,isLoading:w}=F({page:1,sizePerPage:5,search:t},{skip:t.length<3}),S=(d==null?void 0:d.data)||[],m={mt5Login:null,PassMain:"",PassInvestor:""},{register:u,handleSubmit:j,reset:P,watch:M,setValue:T,formState:{errors:n}}=q({resolver:E(B),defaultValues:m}),[L,{isLoading:y}]=D(),z=async r=>{var h,x;try{const s=await L(r).unwrap();s!=null&&s.status&&(a(g({open:!0,message:s==null?void 0:s.message,severity:"success"})),P(m))}catch(s){(h=s==null?void 0:s.data)!=null&&h.status||a(g({open:!0,message:((x=s==null?void 0:s.data)==null?void 0:x.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(A,{children:[e.jsx(o,{sx:{fontSize:"2rem",fontWeight:"700",mb:"2rem"},children:"Change MT5 Password"}),e.jsxs(W,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"}},component:"form",onSubmit:j(z),children:[e.jsx(o,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx(Z,{sx:{my:"1.2rem"}}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsxs(i,{size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Select MT5 ID *"}),e.jsx(V,{width:"100%",items:S.map(r=>({value:r.Login,name:`${r.Name} (${r.Email}) (${r.Login})`})),value:M("mt5Login"),onChange:r=>T("mt5Login",r,{shouldValidate:!0}),onSearchChange:r=>f(r),isLoading:w,shouldBeFullwidth:!0}),e.jsx(l,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),n.mt5Login&&e.jsx(o,{color:"error",fontSize:"14px",children:n.mt5Login.message})]}),e.jsxs(i,{size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Main Password *"}),e.jsx(p,{...u("PassMain",{required:!0}),size:"small",fullWidth:!0,placeholder:"Please type main password..."}),n.PassMain&&e.jsx(o,{color:"error",fontSize:"14px",children:n.PassMain.message})]}),e.jsxs(i,{size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Investor Password *"}),e.jsx(p,{...u("PassInvestor",{required:!0}),size:"small",fullWidth:!0,placeholder:"Please type investor password..."}),n.PassInvestor&&e.jsx(o,{color:"error",fontSize:"14px",children:n.PassInvestor.message})]})]}),e.jsx(k,{variant:"contained",type:"submit",disabled:y,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{U as default};
