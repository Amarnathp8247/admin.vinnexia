import{at as A,X as C,j as o,T as u,$ as R,S as T,aW as D,r as l,c_ as z,aw as E,aB as F,B as I,h as v}from"./index-B_S0l-pH.js";import{F as B}from"./FileDownload-BsKDBh15.js";import{u as g,w as L}from"./xlsx-D1NZSDnX.js";import{M as P}from"./ModalComponent-CkQKoq1J.js";import{U}from"./UserAssignToModalDetails-9G3c2YVy.js";import"./SearchableSelector-C9pLKMko.js";const i=A(),_=[i.accessor("name",{header:"Name",size:200,Cell:({row:e})=>{var t;const{pathname:a}=C(),s=(t=e==null?void 0:e.original)==null?void 0:t.id;return o.jsx(u,{component:R,to:`/admin/userManagement/userDetails/summary/${s}`,state:{pathname:a},sx:{color:"inherit"},children:e.original.name})}}),i.accessor("userName",{header:"User name",size:200,Cell:({row:e})=>{var t;const{pathname:a}=C(),s=(t=e==null?void 0:e.original)==null?void 0:t.id;return o.jsx(u,{component:R,to:`/admin/userManagement/userDetails/summary/${s}`,state:{pathname:a},sx:{color:"inherit"},children:e.original.userName})}}),i.accessor("email",{header:"Email",size:80}),i.accessor("mobile",{header:"Mobile",size:80}),i.accessor("role",{header:"Role",size:80}),i.accessor("status",{header:"Status",size:150,Cell:({row:e})=>{const a=e.original.isDeleted;return o.jsx(T,{sx:{flexDirection:"row",gap:"10px",color:a?"red":"green"},children:a?"Inactive":"Active"})}})],N=e=>{if(!e||e.length===0)return;const a=g.json_to_sheet(e),s=g.book_new();g.book_append_sheet(s,a,"Sheet1"),L(s,"marketingList.xlsx")};function q(){var b,f,S;const{id:e}=D(),[a,s]=l.useState({}),[t,j]=l.useState({pageIndex:0,pageSize:10}),[p,k]=l.useState(""),{data:n,isLoading:M,isError:h,error:c}=z({marketingMemberId:e,page:t.pageIndex+1,sizePerPage:t.pageSize,search:p}),w=(b=c==null?void 0:c.data)==null?void 0:b.message,d=((f=n==null?void 0:n.data)==null?void 0:f.usersList)||[];l.useEffect(()=>{s({})},[d]);const x=E({columns:_,data:d,enableRowSelection:!0,enableSelectAll:!0,getRowId:r=>r._id,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:((S=n==null?void 0:n.data)==null?void 0:S.totalRecords)||0,state:{pagination:t,globalFilter:p,rowSelection:a,isLoading:M,showAlertBanner:h},onRowSelectionChange:s,onPaginationChange:j,onGlobalFilterChange:k,columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiToolbarAlertBannerProps:h?{color:"error",children:w||"Error loading Marketing List."}:void 0,muiTableBodyRowProps:({row:r})=>({sx:{backgroundColor:r.original.isDeleted&&"#ffebee",color:r.original.isDeleted?"red":"inherit","&:hover":{backgroundColor:r.original.isDeleted&&"#ffcdd2"}}}),renderTopToolbarCustomActions:()=>{const m=x.getSelectedRowModel().rows.map(y=>Number(y.original.id));return o.jsxs(I,{sx:{display:"flex",gap:"16px",padding:"8px",flexWrap:"wrap"},children:[o.jsx(v,{variant:"contained",onClick:()=>N(d),startIcon:o.jsx(B,{sx:{color:"white"}}),sx:{textTransform:"none",color:"white",boxShadow:"none","&:hover":{boxShadow:"none"}},children:"Excel"}),m.length>0&&o.jsx(P,{Content:U,btnName:`Assign To (${m.length})`,contentData:m,modalWidth:{xs:"95%",sm:600}})]})}});return o.jsxs(o.Fragment,{children:[o.jsx(u,{sx:{fontWeight:700,py:"20px",fontSize:"1.2rem",color:"text.primary"},children:"User list :-"}),o.jsx(T,{sx:{marginTop:"2rem",borderRadius:"1.2rem",overflow:"hidden"},children:o.jsx(F,{table:x})})]})}export{q as default};
