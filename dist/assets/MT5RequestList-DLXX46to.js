import{o as v,s as q,aC as w,c as A,a as L,b as D,d4 as F,r as h,j as e,S as g,T as c,G as y,I as E,aG as R,h as I,k as M,at as B,d5 as N,aw as O,B as G,aB as V}from"./index-BuLT-AS9.js";import{M as U}from"./ModalComponent-CNxH8GAn.js";const W=v({mt5RequestedId:w({required_error:"MT5 is required"}).nullable().refine(s=>s!==null,{message:"MT5 is required"}),status:q().min(1,"Please select status")});function k({data:s,onClose:T}){const x=s,p=A(),n={mt5RequestedId:null,status:""},{handleSubmit:b,reset:r,watch:f,setValue:o,formState:{errors:i}}=L({resolver:D(W),defaultValues:n}),[S,{isLoading:j}]=F();h.useEffect(()=>{s&&o("mt5RequestedId",s)},[s,o]);const C=async l=>{var u,d;try{const t=await S({...l,mt5RequestedId:x}).unwrap();t!=null&&t.status&&(p(M({open:!0,message:t==null?void 0:t.message,severity:"success"})),r(n),T())}catch(t){(u=t==null?void 0:t.data)!=null&&u.status||p(M({open:!0,message:((d=t==null?void 0:t.data)==null?void 0:d.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(g,{children:[e.jsx(c,{sx:{fontSize:"1.5rem",fontWeight:"700",mb:"1.2rem"},children:"Edit Documents"}),e.jsxs(g,{component:"form",onSubmit:b(C),children:[e.jsx(y,{container:!0,size:12,spacing:2,children:e.jsxs(y,{size:{xs:12},children:[e.jsx(E,{sx:{mb:".5rem"},children:"Status *"}),e.jsx(R,{value:f("status"),items:["APPROVED","REJECTED"],onChange:l=>o("status",l.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0,showDefaultOption:!0}),i.status&&e.jsx(c,{color:"error",fontSize:"14px",children:i.status.message})]})}),e.jsx(I,{variant:"contained",type:"submit",disabled:j,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}const a=B(),H=[a.accessor("Name",{header:"User Name",size:120}),a.accessor("Phone",{header:"Phone",size:100}),a.accessor("Email",{header:"Email",size:100}),a.accessor("status",{header:"Status",size:100,Cell:({row:s})=>e.jsx(c,{sx:{color:s.original.status=="APPROVED"?"green":"red"},children:s.original.status})}),a.accessor("accountType",{header:"Account Type",size:100}),a.accessor("group",{header:"MT5 Group",size:120,Cell:({row:s})=>e.jsx(c,{children:s.original.group.name})}),a.accessor("Leverage",{header:"Leverage",size:100}),a.accessor("Country",{header:"Country",size:100}),a.accessor("createdAt",{header:"Registration Date",Cell:({row:s})=>e.jsx(c,{children:new Date(s.original.createdAt).toLocaleString()})}),a.display({header:"Action",size:200,Cell:({row:s})=>e.jsx(U,{modalWidth:{xs:"90%",sm:600},btnName:"Edit",Content:k,contentData:s.original.id})})],_=["PENDING","APPROVED","REJECTED"],J=["DEMO","REAL"];function K(){var u,d,t;const[s,T]=h.useState({pageIndex:0,pageSize:10}),[x,p]=h.useState(""),[n,b]=h.useState({status:"",accountType:""}),{data:r,isLoading:f,isError:o,error:i}=N({page:s.pageIndex+1,sizePerPage:s.pageSize,search:x,...n}),S=(u=i==null?void 0:i.data)==null?void 0:u.message,j=((d=r==null?void 0:r.data)==null?void 0:d.requestedMt5List)||[],C=O({columns:H,data:j,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:((t=r==null?void 0:r.data)==null?void 0:t.totalRecords)||0,state:{pagination:s,globalFilter:x,isLoading:f,showAlertBanner:o},onPaginationChange:T,onGlobalFilterChange:p,columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiToolbarAlertBannerProps:o?{color:"error",children:S||"Error loading MT5 User List."}:void 0}),l=h.useCallback((m,z)=>{b(P=>({...P,[m]:z}))},[]);return e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"h5",fontWeight:"700",fontSize:"1.8rem",mb:"2rem",children:"MT5 Request List"}),e.jsxs(G,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:[e.jsxs(g,{children:[e.jsx(E,{sx:{mb:.5,fontSize:12},children:"Status"}),e.jsx(R,{items:_,value:n.status,onChange:m=>l("status",m.target.value),width:{xs:"100%",sm:200}})]}),e.jsxs(g,{children:[e.jsx(E,{sx:{mb:.5,fontSize:12},children:"Account Type"}),e.jsx(R,{items:J,value:n.accountType,onChange:m=>l("accountType",m.target.value),width:{xs:"100%",sm:200}})]})]}),e.jsx(g,{sx:{marginTop:"2rem",borderRadius:"1.2rem",overflow:"hidden"},children:e.jsx(V,{table:C})})]})}export{K as default};
