import{o as F,s as m,aE as q,c as W,r as D,a as E,ax as M,aJ as R,b5 as V,j as e,S as k,T as i,aH as N,G as o,I as n,aI as A,e as y,h as G,b as Q,i as z}from"./index-oaA_Ltxz.js";import{S as $}from"./SearchableSelector-B0BDCd1f.js";import{C as H}from"./Card-CaAkebAw.js";const J=F({userId:q({required_error:"Client is required"}).nullable().refine(l=>l!==null,{message:"Client is required"}),mt5Login:m().min(1,"MT5 user is required"),amount:m().min(1,"Please type deposit amount"),comment:m().min(1,"Please type your comment").min(3,"Atlease 3 characters mandatory"),type:m()});function U(){var j;const l=W(),[u,v]=D.useState(""),h={userId:null,mt5Login:"",amount:"",comment:"",type:"3"},{register:g,handleSubmit:I,reset:C,watch:d,setValue:p,formState:{errors:r}}=E({resolver:Q(J),defaultValues:h}),S=d("userId"),{data:c,isLoading:L}=M({page:1,sizePerPage:10,search:u},{skip:u.length<3}),{data:x}=R({page:1,sizePerPage:10,id:S},{skip:!S}),a=x==null?void 0:x.data,w=u.length>=3?((j=c==null?void 0:c.data)==null?void 0:j.usersList)||[]:[],[T,{isLoading:P}]=V(),B=async s=>{var b,f;try{const t=await T(s).unwrap();t!=null&&t.status&&(l(z({open:!0,message:t==null?void 0:t.message,severity:"success"})),C(h))}catch(t){(b=t==null?void 0:t.data)!=null&&b.status||l(z({open:!0,message:((f=t==null?void 0:t.data)==null?void 0:f.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(k,{children:[e.jsx(i,{sx:{fontSize:"2rem",fontWeight:"700"},children:"Remove Bonus"}),e.jsxs(H,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},component:"form",onSubmit:I(B),children:[e.jsx(i,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx(N,{sx:{my:"1.2rem"}}),e.jsxs(o,{container:!0,size:12,spacing:2,children:[e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Select Client *"}),e.jsx($,{width:"100%",items:w.map(s=>({value:s.id,name:`${s.name} (${s.email})`})),value:d("userId"),onChange:s=>p("userId",s,{shouldValidate:!0}),onSearchChange:s=>v(s),isLoading:L,shouldBeFullwidth:!0}),e.jsx(n,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),r.userId&&e.jsx(i,{color:"error",fontSize:"14px",children:r.userId.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Select MT5 ID *"}),e.jsx(A,{shouldBeDisabled:!(a!=null&&a.length)>0,value:d("mt5Login"),onChange:s=>p("mt5Login",s.target.value,{shouldValidate:!0}),items:a==null?void 0:a.map(s=>({value:s.Login,name:s.Login})),shouldBeFullWidth:!0}),e.jsx(n,{sx:{fontSize:"12px"},children:"First select client"}),r.mt5Login&&e.jsx(i,{color:"error",fontSize:"14px",children:r.mt5Login.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Amount IN USD"}),e.jsx(y,{...g("amount",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Enter amount IN USD"}),r.amount&&e.jsx(i,{color:"error",fontSize:"14px",children:r.amount.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Comment"}),e.jsx(y,{...g("comment",{required:!0}),size:"small",multiline:!0,fullWidth:!0,variant:"outlined",placeholder:"Enter Comment"}),r.comment&&e.jsx(i,{color:"error",fontSize:"14px",children:r.comment.message})]})]}),e.jsx(G,{variant:"contained",type:"submit",disabled:P,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{U as default};
