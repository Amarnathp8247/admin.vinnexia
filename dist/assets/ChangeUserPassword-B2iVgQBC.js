import{c as z,r as v,av as I,a as T,aQ as $,j as e,S as F,T as n,aF as q,G as d,I as l,e as D,h as L,b as U,k as x,o as k,s as E,aC as V}from"./index-BuLT-AS9.js";import{S as A}from"./SearchableSelector-DnYtu6tK.js";import{C as G}from"./Card-C53o8KFk.js";const Q=k({userId:V({required_error:"Client is required"}).nullable().refine(a=>a!==null,{message:"Client is required"}),newPassword:E().min(8,"Password must be at least 8 characters").refine(a=>/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/.test(a),{message:"Password must include at least one uppercase letter, one lowercase letter, one number, and one special character (!@#$%^&*)"})});function B(){var m;const a=z(),[i,p]=v.useState(""),{data:o}=I({page:1,sizePerPage:5,search:i},{skip:i.length<3}),g=i.length>=3?((m=o==null?void 0:o.data)==null?void 0:m.usersList)||[]:[],c={userId:null,newPassword:""},{watch:w,setValue:b,register:S,handleSubmit:f,reset:j,formState:{errors:t}}=T({resolver:U(Q),defaultValues:c}),[P,{isLoading:y}]=$(),C=async r=>{var u,h;try{const s=await P(r).unwrap();s!=null&&s.status&&(a(x({open:!0,message:s==null?void 0:s.message,severity:"success"})),j(c))}catch(s){(u=s==null?void 0:s.data)!=null&&u.status||a(x({open:!0,message:((h=s==null?void 0:s.data)==null?void 0:h.message)||"Failed to sign in. Please try again later.",severity:"error"}))}};return e.jsxs(F,{children:[e.jsx(n,{sx:{fontSize:"2rem",fontWeight:"700",mb:"2rem"},children:"Change User Password"}),e.jsxs(G,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"}},component:"form",onSubmit:f(C),children:[e.jsx(n,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx(q,{sx:{my:"1.2rem"}}),e.jsxs(d,{container:!0,size:12,spacing:2,children:[e.jsxs(d,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Select Client *"}),e.jsx(A,{width:"100%",items:g.map(r=>({value:r.id,name:`${r.name} (${r.email})`})),value:w("userId"),onChange:r=>b("userId",r,{shouldValidate:!0}),onSearchChange:r=>p(r)}),e.jsx(l,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),t.userId&&e.jsx(n,{color:"error",fontSize:"14px",children:t.userId.message})]}),e.jsxs(d,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Password *"}),e.jsx(D,{...S("newPassword",{required:!0}),size:"small",fullWidth:!0,placeholder:"Enter Password",variant:"outlined"}),t.newPassword&&e.jsx(n,{color:"error",fontSize:"14px",children:t.newPassword.message})]})]}),e.jsx(L,{type:"submit",variant:"contained",disabled:y,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{B as default};
