import{o as F,s as n,c as P,aW as W,r as z,c4 as k,a as A,c5 as V,c6 as q,j as e,S as G,B as M,R as O,g as Q,$ as _,a_ as $,T as a,ar as H,aF as J,G as o,I as l,e as x,aG as L,h as K,b as U,k as E}from"./index-Bjlp2vES.js";import{S as X}from"./SearchableDropdown-BWUscO7Y.js";import{a as Y}from"./allCountryName-pRAP9FS8.js";import{C as Z}from"./Card--HSV-vWh.js";const ee=F({name:n().trim().min(1,"Name is required").min(3,"Name must be at least 3 characters"),email:n().trim().email("Please enter a valid email"),mobile:n().min(10,"Mobile number must be at least 10 digits"),country:n().trim().min(1,"Please select your country"),status:n().trim().min(1,"Please select a status"),source:n().trim().min(1,"Please select a source"),description:n().trim().min(3,"Description must be at least 3 characters")});function ie(){const f=P(),{id:d}=W(),m=!!d,[v,g]=z.useState(!m),{data:h,refetch:T}=k({id:d},{skip:!d}),r=(h==null?void 0:h.data)||null,p={name:"",email:"",mobile:"",country:"",status:"",source:"",description:""},{register:u,handleSubmit:w,getValues:R,reset:c,watch:j,setValue:b,formState:{errors:s}}=A({resolver:U(ee),defaultValues:p});z.useEffect(()=>{m&&r?(c({name:r.name||"",email:r.email||"",mobile:r.mobile||"",country:r.country||"",status:r.status||"",source:r.source||"",description:r.description||""}),g(!0)):d||(c(p),g(!0))},[d,r,c]);const[B,{isLoading:I}]=V(),[N,{isLoading:C}]=q(),D=async i=>{var y,S;try{const t=await(m?B({...i,leadId:d}).unwrap():N(i).unwrap());t!=null&&t.status&&(f(E({open:!0,message:t==null?void 0:t.message,severity:"success"})),m?(await T(),c(R())):c(p))}catch(t){(y=t==null?void 0:t.data)!=null&&y.status||f(E({open:!0,message:((S=t==null?void 0:t.data)==null?void 0:S.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(G,{children:[e.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx(O,{title:"Back",placement:"bottom-end",children:e.jsx(Q,{component:_,to:"/admin/marketing/leadList",children:e.jsx($,{})})}),e.jsx(a,{sx:{fontSize:"2rem",fontWeight:"700"},children:m?"Edit Leads":"Add Leads"})]}),v?e.jsxs(Z,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},component:"form",onSubmit:w(D),children:[e.jsx(a,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx(J,{sx:{my:"1.2rem"}}),e.jsxs(o,{container:!0,size:12,spacing:2,children:[e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Name *"}),e.jsx(x,{...u("name",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Name"}),s.name&&e.jsx(a,{color:"error",fontSize:"14px",children:s.name.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Phone *"}),e.jsx(x,{...u("mobile",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Phone"}),s.mobile&&e.jsx(a,{color:"error",fontSize:"14px",children:s.mobile.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Email *"}),e.jsx(x,{...u("email",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Email"}),s.email&&e.jsx(a,{color:"error",fontSize:"14px",children:s.email.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Country *"}),e.jsx(X,{options:Y,value:j("country"),onChange:i=>b("country",i,{shouldValidate:!0}),placeholder:"Select Country"}),s.country&&e.jsx(a,{color:"error",fontSize:"14px",children:s.country.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Source *"}),e.jsx(L,{value:j("source"),onChange:i=>b("source",i.target.value,{shouldValidate:!0}),items:["REFERRAL","ORGANIC"],shouldBeFullWidth:!0}),s.source&&e.jsx(a,{color:"error",fontSize:"14px",children:s.source.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Status *"}),e.jsx(L,{value:j("status"),onChange:i=>b("status",i.target.value,{shouldValidate:!0}),items:["INTRESTED","NOT-INTRESTED"],shouldBeFullWidth:!0}),s.status&&e.jsx(a,{color:"error",fontSize:"14px",children:s.status.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(l,{sx:{mb:".5rem"},children:"Description *"}),e.jsx(x,{...u("description",{required:!0}),rows:2,multiline:!0,fullWidth:!0,variant:"outlined",placeholder:"Description"}),s.description&&e.jsx(a,{color:"error",fontSize:"14px",children:s.description.message})]})]}),e.jsx(K,{variant:"contained",type:"submit",disabled:C||I,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]}):e.jsx(H,{})]})}export{ie as default};
