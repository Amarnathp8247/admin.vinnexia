import{o as A,s as m,aE as R,c as $,aX as O,cM as Q,r as I,a as H,cN as X,cO as Z,cP as _,j as e,S as J,B as K,Q as U,g as Y,Z as ee,a$ as se,T as i,at as re,aH as te,G as o,I as n,e as d,aI as M,h as ae,b as ie,i as E}from"./index-oaA_Ltxz.js";import{S as oe}from"./SearchableSelector-B0BDCd1f.js";import{C as ne}from"./Card-CaAkebAw.js";const me=A({mt5GroupId:R({required_error:"MT5 group name is required"}).nullable().refine(x=>x!==null,{message:"MT5 group name is required"}),name:m().min(1,"Please type deposit amount"),status:m().min(1,"Please select status"),groupType:m().min(1,"Please select group type"),recomendation:m().min(1,"Please type recommendation").max(15,"Recomendation should not be more than 15 character"),message:m().min(1,"Please type message").max(100,"Message should not be more than 55 character"),minDeposit:m().regex(/^\d+$/,"Minimum deposit must be a number").min(1,"Please type minimum deposit"),spread:m().regex(/^\d*\.?\d+$/,"Spread must be a valid number").min(1,"Please type Spread"),commission:m().regex(/^\d+$/,"Commission must be a number").min(1,"Please type Commission"),leverage:m().regex(/^\d+$/,"Leverage must be a number").min(1,"Please type Leverage")});function ce(){var v,y,z;const x=$(),{id:u}=O(),c=!!u,{data:h,refetch:P,isLoading:w}=Q({id:u},{skip:!u}),s=(h==null?void 0:h.data)||null,[g,C]=I.useState(""),j={name:"",mt5GroupId:null,status:"",groupType:"",recomendation:"",message:"",minDeposit:"",spread:"",commission:"",leverage:""},{register:l,watch:f,setValue:b,handleSubmit:D,reset:p,getValues:B,formState:{errors:r}}=H({resolver:ie(me),defaultValues:j});I.useEffect(()=>{c&&s?p({name:s.name||"",mt5GroupId:s.mt5Group||null,status:s.status||"",groupType:s.type||"",recomendation:s.recomendation||"",message:s.message||"",minDeposit:s.minDeposit||"",spread:s.spread||"",commission:s.commission||"",leverage:s.leverage||""}):u||p(j)},[u,s,p]);const{data:S,isLoading:q}=X({page:1,sizePerPage:10,search:c?(v=s==null?void 0:s.mt5GroupData)==null?void 0:v.mt5GroupName.split("\\")[0]:g},{skip:g.length<2}),G=g.length>=2?((y=S==null?void 0:S.data)==null?void 0:y.list)||[]:[],[N,{isLoading:W}]=Z(),[F,{isLoading:V}]=_(),k=async t=>{var T,L;try{const a=await(c?F({...t,groupId:u}).unwrap():N(t).unwrap());a!=null&&a.status&&(x(E({open:!0,message:a==null?void 0:a.message,severity:"success"})),c?(await P(),p(B())):p(j))}catch(a){(T=a==null?void 0:a.data)!=null&&T.status||x(E({open:!0,message:((L=a==null?void 0:a.data)==null?void 0:L.message)||"Failed to sign in. Please try again later.",severity:"error"}))}};return e.jsxs(J,{children:[e.jsxs(K,{sx:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx(U,{title:"Back",placement:"bottom-end",children:e.jsx(Y,{component:ee,to:"/admin/groupManagement/groupList",children:e.jsx(se,{})})}),e.jsx(i,{sx:{fontSize:"2rem",fontWeight:"700"},children:c?"Edit Group":"Add Group"})]}),w?e.jsx(re,{}):e.jsxs(ne,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},component:"form",onSubmit:D(k),children:[e.jsx(i,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx(te,{sx:{my:"1.2rem"}}),e.jsxs(o,{container:!0,size:12,spacing:2,children:[e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Name *"}),e.jsx(d,{...l("name",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Enter Group Name"}),r.name&&e.jsx(i,{color:"error",fontSize:"14px",children:r.name.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"MT5 Group Name *"}),e.jsx(oe,{width:"100%",items:c?[{value:s.mt5Group,name:(z=s==null?void 0:s.mt5GroupData)==null?void 0:z.mt5GroupName},...G.filter(t=>t.id!==s.mt5Group).map(t=>({value:t.id,name:t.mt5GroupName}))]:G.map(t=>({value:t.id,name:t.mt5GroupName})),value:f("mt5GroupId"),onChange:t=>b("mt5GroupId",t,{shouldValidate:!0}),onSearchChange:t=>C(t),isLoading:q,shouldBeFullwidth:!0}),e.jsx(n,{sx:{fontSize:"12px"},children:"Please enter 2 or more characters"}),r.mt5GroupId&&e.jsx(i,{color:"error",fontSize:"14px",children:r.mt5GroupId.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Type *"}),e.jsx(M,{value:f("groupType"),items:["REAL","DEMO"],onChange:t=>b("groupType",t.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0,showDefaultOption:!0}),r.groupType&&e.jsx(i,{color:"error",fontSize:"14px",children:r.groupType.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Status *"}),e.jsx(M,{value:f("status"),items:["ACTIVE","INACTIVE"],onChange:t=>b("status",t.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0,showDefaultOption:!0}),r.status&&e.jsx(i,{color:"error",fontSize:"14px",children:r.status.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Recomendation *"}),e.jsx(d,{...l("recomendation",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Enter Recomendation"}),r.recomendation&&e.jsx(i,{color:"error",fontSize:"14px",children:r.recomendation.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Message *"}),e.jsx(d,{...l("message",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Enter Message"}),r.message&&e.jsx(i,{color:"error",fontSize:"14px",children:r.message.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Min deposit *"}),e.jsx(d,{...l("minDeposit",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Enter Min deposit"}),r.minDeposit&&e.jsx(i,{color:"error",fontSize:"14px",children:r.minDeposit.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Spread *"}),e.jsx(d,{...l("spread",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Enter Spread"}),r.spread&&e.jsx(i,{color:"error",fontSize:"14px",children:r.spread.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Commission *"}),e.jsx(d,{...l("commission",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Enter Commission"}),r.commission&&e.jsx(i,{color:"error",fontSize:"14px",children:r.commission.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Leverage *"}),e.jsx(d,{...l("leverage",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Enter Leverage"}),r.leverage&&e.jsx(i,{color:"error",fontSize:"14px",children:r.leverage.message})]})]}),e.jsx(ae,{type:"submit",variant:"contained",disabled:W||V,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{ce as default};
