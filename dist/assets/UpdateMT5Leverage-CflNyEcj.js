import{o as M,s as x,c as w,r as z,aI as C,a as D,b3 as F,j as e,S as P,T as i,aF as I,G as l,I as c,aG as V,h as k,b as q,k as p}from"./index-B_S0l-pH.js";import{S as B}from"./SearchableSelector-C9pLKMko.js";import{C as E}from"./Card-BbyUSaIa.js";const G=["10","50","100","200","300","400","500","1000"],U=M({mt5Login:x({required_error:"MT5 Login is required"}).nullable().refine(r=>r!==null,{message:"MT5 Login is required"}),Leverage:x().min(1,"Please select leverage")});function W(){const r=w(),[n,L]=z.useState(""),{data:o,isLoading:S}=C({page:1,sizePerPage:5,search:n},{skip:n.length<3}),v=n.length>=3?(o==null?void 0:o.data)||[]:[],m={mt5Login:null,Leverage:""},{handleSubmit:b,reset:f,watch:g,setValue:d,formState:{errors:t}}=D({resolver:q(U),defaultValues:m}),[j,{isLoading:T}]=F(),y=async a=>{var u,h;try{const s=await j(a).unwrap();s!=null&&s.status&&(r(p({open:!0,message:s==null?void 0:s.message,severity:"success"})),f(m))}catch(s){(u=s==null?void 0:s.data)!=null&&u.status||r(p({open:!0,message:((h=s==null?void 0:s.data)==null?void 0:h.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(P,{children:[e.jsx(i,{sx:{fontSize:"2rem",fontWeight:"700",mb:"2rem"},children:"Update MT5 Leverage"}),e.jsxs(E,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"}},component:"form",onSubmit:b(y),children:[e.jsx(i,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx(I,{sx:{my:"1.2rem"}}),e.jsxs(l,{container:!0,size:12,spacing:2,children:[e.jsxs(l,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(c,{sx:{mb:".5rem"},children:"Select MT5 ID *"}),e.jsx(B,{width:"100%",items:v.map(a=>({value:a.Login,name:`${a.Name} (${a.Email}) (${a.Login})`})),value:g("mt5Login"),onChange:a=>d("mt5Login",a,{shouldValidate:!0}),onSearchChange:a=>L(a),isLoading:S,shouldBeFullwidth:!0}),e.jsx(c,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),t.mt5Login&&e.jsx(i,{color:"error",fontSize:"14px",children:t.mt5Login.message})]}),e.jsxs(l,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(c,{sx:{mb:".5rem"},children:"Select Leverage *"}),e.jsx(V,{value:g("Leverage"),items:G,onChange:a=>d("Leverage",a.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),t.Leverage&&e.jsx(i,{color:"error",fontSize:"14px",children:t.Leverage.message})]})]}),e.jsx(k,{variant:"contained",type:"submit",disabled:T,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{U as changeMT5LeverageSchema,W as default};
