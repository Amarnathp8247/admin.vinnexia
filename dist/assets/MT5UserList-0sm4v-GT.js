import{at as S,d as v,c as z,X as E,j as a,T as n,aH as I,r as c,aI as R,aw as U,S as b,I as y,e as D,aB as F,h as w}from"./index-Bjlp2vES.js";import{F as A}from"./FileDownload-DV9Ji3BV.js";import{M as B}from"./ModalComponent-BqVfaX8R.js";import{M as k}from"./MT5UserDetailsModalData-BDs5MnBR.js";const t=S(),P=[t.accessor("Login",{header:"Log In",size:100,Cell:({row:e})=>{var i;const r=v(),d=z(),{pathname:m}=E(),o=(i=e==null?void 0:e.original)==null?void 0:i.userId,u=()=>{d(I("MT5 Account")),r(`/admin/userManagement/userDetails/list/${o}`,{state:{pathname:m}})};return a.jsx(n,{onClick:u,sx:{color:"inherit",textDecoration:"underline",cursor:"pointer"},children:e.original.Login})}}),t.accessor("group",{header:"MT5 Group",size:120,Cell:({row:e})=>a.jsx(n,{children:e.original.group.name})}),t.display({id:"userName",header:"User Name",size:120,Cell:({row:e})=>a.jsx(n,{children:e.original.user.name})}),t.display({id:"userEmail",header:"User Email",size:100,Cell:({row:e})=>a.jsx(n,{children:e.original.user.email})}),t.accessor("Leverage",{header:"Leverage",size:100}),t.accessor("Country",{header:"Country",size:100}),t.accessor("createdAt",{header:"Registration Date",size:200,Cell:({row:e})=>a.jsx(n,{children:new Date(e.original.createdAt).toLocaleString()})}),t.display({id:"action",header:"Action",size:80,Cell:({row:e})=>{const{Login:r}=e.original;return a.jsx(B,{modalWidth:{xs:"90%",sm:600},btnName:"Details",Content:k,contentData:{Login:r}})}})];function O(){var x;const[e,r]=c.useState({pageIndex:0,pageSize:10}),[d,m]=c.useState(""),[o,u]=c.useState(!1),[i,f]=c.useState(""),{data:s,isLoading:L,isError:p,error:h}=R({page:e.pageIndex+1,sizePerPage:e.pageSize,search:d,searchWithLogin:i,fileExport:o});c.useEffect(()=>{if(o&&s instanceof Blob){const g=window.URL.createObjectURL(s),l=document.createElement("a");l.href=g,l.download="userList.xlsx",document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(g),u(!1)}},[o,s]);const C=(x=h==null?void 0:h.data)==null?void 0:x.message,T=s instanceof Blob?[]:(s==null?void 0:s.data)||[],j=s instanceof Blob?0:(s==null?void 0:s.totalRecords)||0,M=U({columns:P,data:T,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:j||0,state:{pagination:e,globalFilter:d,isLoading:L,showAlertBanner:p},onPaginationChange:r,onGlobalFilterChange:m,columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiToolbarAlertBannerProps:p?{color:"error",children:C||"Error loading MT5 User List."}:void 0,renderTopToolbarCustomActions:()=>a.jsx(w,{variant:"contained",startIcon:a.jsx(A,{}),onClick:()=>u(!0),disabled:o,sx:{textTransform:"none"},children:"Excel"})});return a.jsxs(a.Fragment,{children:[a.jsx(n,{variant:"h5",fontWeight:"700",fontSize:"1.8rem",mb:"2rem",children:"MT5 User List"}),a.jsxs(b,{children:[a.jsx(y,{sx:{mb:.5,fontSize:12},children:"Search with Login"}),a.jsx(D,{size:"small",placeholder:"Enter MT5 login ID",value:i,onChange:g=>f(g.target.value),sx:{width:{xs:"100%",sm:250}}})]}),a.jsx(b,{sx:{marginTop:"2rem",borderRadius:"1.2rem",overflow:"hidden"},children:a.jsx(F,{table:M})})]})}export{O as default};
