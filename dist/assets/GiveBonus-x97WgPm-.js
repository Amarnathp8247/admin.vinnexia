import{o as q,s as l,aE as E,c as F,r as B,a as W,ax as G,aJ as M,b4 as V,j as e,S as k,T as i,aH as N,G as o,I as a,aI as A,e as p,h as Q,b as R,i as z}from"./index-oaA_Ltxz.js";import{S as $}from"./SearchableSelector-B0BDCd1f.js";import{C as H}from"./Card-CaAkebAw.js";const J=q({userId:E({required_error:"Client is required"}).nullable().refine(m=>m!==null,{message:"Client is required"}),mt5Login:l().min(1,"MT5 user is required"),amount:l().min(1,"Please type deposit amount"),comment:l().min(1,"Please type your comment").min(3,"Atlease 3 characters mandatory"),type:l(),expireDays:l().min(1,"Please type expiry days")});function U(){var S;const m=F(),[u,v]=B.useState(""),g={userId:null,mt5Login:"",amount:"",comment:"",type:"3",expireDays:""},{register:d,handleSubmit:I,reset:C,watch:c,setValue:j,formState:{errors:t}}=W({resolver:R(J),defaultValues:g}),y=c("userId"),{data:x,isLoading:L}=G({page:1,sizePerPage:10,search:u},{skip:u.length<3}),{data:h}=M({page:1,sizePerPage:10,id:y},{skip:!y}),n=h==null?void 0:h.data,D=u.length>=3?((S=x==null?void 0:x.data)==null?void 0:S.usersList)||[]:[],[T,{isLoading:w}]=V(),P=async s=>{var b,f;try{const r=await T(s).unwrap();r!=null&&r.status&&(m(z({open:!0,message:r==null?void 0:r.message,severity:"success"})),C(g))}catch(r){(b=r==null?void 0:r.data)!=null&&b.status||m(z({open:!0,message:((f=r==null?void 0:r.data)==null?void 0:f.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(k,{children:[e.jsx(i,{sx:{fontSize:"2rem",fontWeight:"700"},children:"Give Bonus"}),e.jsxs(H,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},component:"form",onSubmit:I(P),children:[e.jsx(i,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx(N,{sx:{my:"1.2rem"}}),e.jsxs(o,{container:!0,size:12,spacing:2,children:[e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(a,{sx:{mb:".5rem"},children:"Select Client *"}),e.jsx($,{width:"100%",items:D.map(s=>({value:s.id,name:`${s.name} (${s.email})`})),value:c("userId"),onChange:s=>j("userId",s,{shouldValidate:!0}),onSearchChange:s=>v(s),isLoading:L,shouldBeFullwidth:!0}),e.jsx(a,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),t.userId&&e.jsx(i,{color:"error",fontSize:"14px",children:t.userId.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(a,{sx:{mb:".5rem"},children:"Select MT5 ID *"}),e.jsx(A,{shouldBeDisabled:!(n!=null&&n.length)>0,value:c("mt5Login"),onChange:s=>j("mt5Login",s.target.value,{shouldValidate:!0}),items:n==null?void 0:n.map(s=>({value:s.Login,name:s.Login})),shouldBeFullWidth:!0}),e.jsx(a,{sx:{fontSize:"12px"},children:"First select client"}),t.mt5Login&&e.jsx(i,{color:"error",fontSize:"14px",children:t.mt5Login.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(a,{sx:{mb:".5rem"},children:"Amount IN USD"}),e.jsx(p,{...d("amount",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Enter amount IN USD"}),t.amount&&e.jsx(i,{color:"error",fontSize:"14px",children:t.amount.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(a,{sx:{mb:".5rem"},children:"Expiry days"}),e.jsx(p,{...d("expireDays",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Enter expiry in days"}),t.expireDays&&e.jsx(i,{color:"error",fontSize:"14px",children:t.expireDays.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(a,{sx:{mb:".5rem"},children:"Comment"}),e.jsx(p,{...d("comment",{required:!0}),size:"small",multiline:!0,fullWidth:!0,variant:"outlined",placeholder:"Enter Comment"}),t.comment&&e.jsx(i,{color:"error",fontSize:"14px",children:t.comment.message})]})]}),e.jsx(Q,{variant:"contained",type:"submit",disabled:w,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{U as default};
