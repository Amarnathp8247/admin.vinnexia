import{o as F,aE as I,c as V,r as S,ax as f,a as $,bI as k,j as s,S as E,T as i,aH as G,G as c,I as n,h as M,b as A,i as j}from"./index-oaA_Ltxz.js";import{S as B}from"./SearchableSelector-B0BDCd1f.js";import{C as R}from"./Card-CaAkebAw.js";const _=F({ibId:I({required_error:"IB is required"}).nullable().refine(a=>a!==null,{message:"IB is required"}),userId:I({required_error:"User is required"}).nullable().refine(a=>a!==null,{message:"User is required"})});function W(){var g,p;const a=V(),[o,L]=S.useState(""),[d,v]=S.useState(""),m={ibId:null,userId:null},{data:l,isLoading:w}=f({page:1,sizePerPage:10,isIb:!1,search:o},{skip:o.length<3}),{data:u,isLoading:y}=f({page:1,sizePerPage:10,isIb:!0,search:d},{skip:d.length<2}),z=o.length>=3?((g=l==null?void 0:l.data)==null?void 0:g.usersList)||[]:[],C=d.length>=2?((p=u==null?void 0:u.data)==null?void 0:p.usersList)||[]:[],{watch:h,setValue:x,handleSubmit:T,reset:U,formState:{errors:t}}=$({resolver:A(_),defaultValues:m}),[q,{isLoading:P}]=k(),D=async e=>{var b;try{const r=await q(e).unwrap();r!=null&&r.status&&(a(j({open:!0,message:r==null?void 0:r.message,severity:"success"})),U(m))}catch(r){a(j({open:!0,message:((b=r==null?void 0:r.data)==null?void 0:b.message)||"Failed to assign client under IB.",severity:"error"}))}};return s.jsxs(E,{children:[s.jsx(i,{sx:{fontSize:"2rem",fontWeight:700},children:"Assign client under IB"}),s.jsxs(R,{sx:{boxShadow:"0 0px 8px rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",p:{xs:"1rem",md:"2rem"},mt:"2rem"},component:"form",onSubmit:T(D),children:[s.jsx(i,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),s.jsx(G,{sx:{my:"1.2rem"}}),s.jsxs(c,{container:!0,size:12,spacing:3,children:[s.jsxs(c,{item:!0,size:{xs:12,sm:6,md:4},children:[s.jsx(n,{sx:{mb:".5rem"},children:"Select Client *"}),s.jsx(B,{width:"100%",items:z.map(e=>({value:e.id,name:`${e.name} (${e.email})`})),value:h("userId"),onChange:e=>x("userId",e,{shouldValidate:!0}),onSearchChange:e=>L(e),isLoading:w,shouldBeFullwidth:!0}),s.jsx(n,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),t.userId&&s.jsx(i,{color:"error",fontSize:"14px",children:t.userId.message})]}),s.jsxs(c,{item:!0,size:{xs:12,sm:6,md:4},children:[s.jsx(n,{sx:{mb:".5rem"},children:"Select IB *"}),s.jsx(B,{width:"100%",items:C.map(e=>({value:e.id,name:`${e.name} (${e.email})`})),value:h("ibId"),onChange:e=>x("ibId",e,{shouldValidate:!0}),onSearchChange:e=>v(e),isLoading:y,shouldBeFullwidth:!0}),s.jsx(n,{sx:{fontSize:"12px"},children:"Please enter 2 or more characters"}),t.ibId&&s.jsx(i,{color:"error",fontSize:"14px",children:t.ibId.message})]})]}),s.jsx(M,{variant:"contained",type:"submit",disabled:P,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{W as default,_ as updateMT5GroupSchema};
