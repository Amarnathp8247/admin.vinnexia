import{at as W,j as a,T as i,X as y,$ as D,r as u,aR as O,aw as k,B as f,S as x,I as g,aG as E,az as Y,aA as z,aB as H,h as V}from"./index-Bjlp2vES.js";import{F as U}from"./FileDownload-DV9Ji3BV.js";import{d as A}from"./dayjs.min-jyhz54Th.js";import{A as G}from"./AdapterDayjs-B9IfESkl.js";const c=W(),$=[c.accessor("id",{header:"ID",size:40,Cell:({row:t})=>{const e=t.original.id;return a.jsx(i,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),c.display({id:"userName",header:"User Name",size:80,Cell:({row:t})=>{var l,m;const{pathname:e}=y(),n=(m=(l=t==null?void 0:t.original)==null?void 0:l.user)==null?void 0:m.id,o=t.original.user.name;return a.jsx(i,{component:o?D:"em",to:`/admin/userManagement/userDetails/summary/${n}`,state:{userId:n,name:o,pathname:e},sx:{color:"inherit"},children:o||"Empty"})}}),c.display({id:"userEmail",header:"User Email",size:80,Cell:({row:t})=>{var m,s;const{pathname:e}=y(),n=(s=(m=t==null?void 0:t.original)==null?void 0:m.user)==null?void 0:s.id,o=t.original.user.name,l=t.original.user.email;return a.jsx(i,{component:l?D:"em",to:`/admin/userManagement/userDetails/summary/${n}`,state:{userId:n,name:o,pathname:e},sx:{color:"inherit"},children:l||"Empty"})}}),c.accessor("mt5Login",{header:"MT5 Login ID",size:100,Cell:({row:t})=>{var m,s;const{pathname:e}=y(),n=t.original.mt5Login,o=(s=(m=t==null?void 0:t.original)==null?void 0:m.user)==null?void 0:s.id,l=t.original.user.name;return a.jsxs(i,{component:n?D:"em",to:`/admin/userManagement/userDetails/summary/${o}`,state:{userId:o,name:l,pathname:e},sx:{color:"inherit"},children:[" ",n||"Empty"]})}}),c.accessor("transactionType",{header:"Transaction Type",size:120,Cell:({row:t})=>{const e=t.original.transactionType;return a.jsx(i,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),c.accessor("paymentMethods",{header:"Payment Methods",size:120,Cell:({row:t})=>{const e=t.original.paymentMethods;return a.jsx(i,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),c.accessor("referrenceNo",{header:"Referrence No.",size:120,Cell:({row:t})=>{const e=t.original.referrenceNo;return a.jsx(i,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),c.accessor("amount",{header:"Amount",size:150,Cell:({row:t})=>{const e=t.original.amount;return a.jsx(i,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),c.accessor("status",{header:"Status",size:150,Cell:({row:t})=>{const e=t.original.status;return a.jsx(i,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),c.display({id:"Approved By",header:"Approved By",size:80,Cell:({row:t})=>{var n,o;const e=(o=(n=t==null?void 0:t.original)==null?void 0:n.byAdmin)==null?void 0:o.email;return a.jsx(i,{children:e})}}),c.accessor("remark",{header:"Remark",size:80,Cell:({row:t})=>{const e=t.original.remark;return a.jsx(i,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}}),c.accessor("createdAt",{header:"Registration Date",size:200,Cell:({row:t})=>{const e=new Date(t.original.createdAt).toLocaleString();return a.jsx(i,{component:!e&&"em",sx:{fontSize:!e&&"12px"},children:e||"Empty"})}})],_=["PENDING","APPROVED","REJECTED","COMPLETED"],w=["INTERNAL-DEPOSIT","INTERNAL-WITHDRAW","CREDIT-DEPOSIT","BONUS-DEPOSIT","CREDIT-WITHDRAW","BONUS-WITHDRAW","WALLET-DEPOSIT","WALLET-WITHDRAW","IB-WITHDRAW"],J=["BANK","CASH","CRYPTO"],Z=()=>{var b;const[t,e]=u.useState({pageIndex:0,pageSize:10}),[n,o]=u.useState(""),[l,m]=u.useState(!1),[s,I]=u.useState({status:"",transactionType:"",paymentMethod:"",fromDate:null,toDate:null}),L=s.fromDate?A(s.fromDate).format("YYYY-MM-DD"):void 0,M=s.toDate?A(s.toDate).format("YYYY-MM-DD"):void 0,{data:d,isLoading:j,isError:S,error:T}=O({page:t.pageIndex+1,sizePerPage:t.pageSize,search:n,...s,fromDate:L,toDate:M,fileExport:l});u.useEffect(()=>{if(l&&d instanceof Blob){const r=window.URL.createObjectURL(d),p=document.createElement("a");p.href=r,p.setAttribute("download","transactionList.xlsx"),document.body.appendChild(p),p.click(),p.remove(),m(!1)}},[l,d]);const R=(b=T==null?void 0:T.data)==null?void 0:b.message,C=d instanceof Blob?[]:(d==null?void 0:d.data)||[],P=d instanceof Blob?0:(d==null?void 0:d.totalRecords)||0,v=u.useMemo(()=>$,[]),N=u.useMemo(()=>C,[C]),B=k({columns:v,data:N,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:P,state:{pagination:t,globalFilter:n,isLoading:j,showAlertBanner:S},onPaginationChange:e,onGlobalFilterChange:o,columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiToolbarAlertBannerProps:S?{color:"error",children:R||"Error loading Transaction List."}:void 0,renderTopToolbarCustomActions:()=>a.jsx(f,{sx:{display:"flex",gap:2,padding:1,flexWrap:"wrap"},children:a.jsx(V,{disabled:j,variant:"contained",onClick:()=>m(!0),startIcon:a.jsx(U,{sx:{color:"white"}}),sx:{textTransform:"none",color:"white",boxShadow:"none","&:hover":{boxShadow:"none"}},children:"Excel"})})}),h=u.useCallback((r,p)=>{I(F=>({...F,[r]:p}))},[]);return a.jsxs(a.Fragment,{children:[a.jsx(i,{variant:"h5",fontWeight:700,fontSize:"1.8rem",mb:4,children:"Transaction List"}),a.jsxs(f,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},gap:2,flexWrap:"wrap",mb:4},children:[a.jsxs(f,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:[a.jsxs(x,{children:[a.jsx(g,{sx:{mb:.5,fontSize:12},children:"Status"}),a.jsx(E,{items:_,value:s.status,onChange:r=>h("status",r.target.value),width:{xs:"100%",sm:200}})]}),a.jsxs(x,{children:[a.jsx(g,{sx:{mb:.5,fontSize:12},children:"Transaction Type"}),a.jsx(E,{items:w,value:s.transactionType,onChange:r=>h("transactionType",r.target.value),width:{xs:"100%",sm:200}})]}),a.jsxs(x,{children:[a.jsx(g,{sx:{mb:.5,fontSize:12},children:"Payment Method"}),a.jsx(E,{items:J,value:s.paymentMethod,onChange:r=>h("paymentMethod",r.target.value),width:{xs:"100%",sm:200}})]})]}),a.jsx(Y,{dateAdapter:G,children:a.jsxs(f,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[a.jsxs(x,{children:[a.jsx(g,{sx:{mb:.5,fontSize:12},children:"From"}),a.jsx(z,{value:s.fromDate,onChange:r=>h("fromDate",r),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]}),a.jsxs(x,{children:[a.jsx(g,{sx:{mb:.5,fontSize:12},children:"To"}),a.jsx(z,{value:s.toDate,onChange:r=>h("toDate",r),slotProps:{textField:{size:"small"},field:{clearable:!0}}})]})]})})]}),a.jsx(x,{sx:{mt:4,borderRadius:2,overflow:"hidden"},children:a.jsx(H,{table:B})})]})};export{Z as default};
