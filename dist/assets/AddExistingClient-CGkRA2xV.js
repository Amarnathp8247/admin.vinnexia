import{o as B,s as h,aE as z,c as k,a2 as V,r as v,ax as W,aF as Z,a as Q,b2 as R,j as e,S as _,T as i,B as H,aH as N,G as o,I as n,e as x,h as U,b as J,i as P}from"./index-oaA_Ltxz.js";import{S as w}from"./SearchableSelector-B0BDCd1f.js";const K=B({userId:z({required_error:"Client is required"}).nullable().refine(a=>a!==null,{message:"Client is required"}),groupId:z({required_error:"Group is required"}).nullable().refine(a=>a!==null,{message:"Group is required"}),PassMain:h().min(8,"Main password must be at least 8 characters").refine(a=>/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/.test(a),{message:"Main password must include at least one uppercase letter, one lowercase letter, one number, and one special character (!@#$%^&*)"}),PassInvestor:h().min(8,"Investor password must be at least 8 characters").refine(a=>/^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/.test(a),{message:"Investor password must include at least one uppercase letter, one lowercase letter, one number, and one special character (!@#$%^&*)"}),login:h().trim().min(1,"MT5 ID is required")});function Y(){var j,S;const a=k(),{selectedTheme:y}=V(s=>s.themeMode),[l,C]=v.useState(""),[d,L]=v.useState(""),{data:u,isLoading:M}=W({page:1,sizePerPage:20,search:l},{skip:l.length<3}),T=l.length>=3?((j=u==null?void 0:u.data)==null?void 0:j.usersList)||[]:[],{data:c,isLoading:$}=Z({page:1,sizePerPage:20,search:d},{skip:d.length<3}),q=d.length>=3?((S=c==null?void 0:c.data)==null?void 0:S.groupsList)||[]:[],p={userId:null,PassMain:"",PassInvestor:"",groupId:null,login:""},{register:m,handleSubmit:D,reset:E,watch:g,setValue:b,formState:{errors:t}}=Q({resolver:J(K),defaultValues:p}),[G,{isLoading:A}]=R(),F=async s=>{var f,I;try{const r=await G(s).unwrap();r!=null&&r.status&&(a(P({open:!0,message:r==null?void 0:r.message,severity:"success"})),E(p))}catch(r){(f=r==null?void 0:r.data)!=null&&f.status||a(P({open:!0,message:((I=r==null?void 0:r.data)==null?void 0:I.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(_,{children:[e.jsx(i,{sx:{fontSize:"2rem",fontWeight:"700",mb:"2rem"},children:"Add Existing Client"}),e.jsxs(H,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"},bgcolor:y==="dark"&&"#272727"},component:"form",onSubmit:D(F),children:[e.jsx(i,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx(N,{sx:{my:"1.2rem"}}),e.jsxs(o,{container:!0,size:12,spacing:2,children:[e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Select Client *"}),e.jsx(w,{width:"100%",items:T.map(s=>({value:s.id,name:`${s.name} (${s.email})`})),value:g("userId"),onChange:s=>b("userId",s,{shouldValidate:!0}),onSearchChange:s=>C(s),isLoading:M,shouldBeFullwidth:!0}),e.jsx(n,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),t.userId&&e.jsx(i,{color:"error",fontSize:"14px",children:t.userId.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Select Group *"}),e.jsx(w,{width:"100%",items:q.map(s=>({value:s.id,name:`${s.name}`})),value:g("groupId"),onChange:s=>b("groupId",s,{shouldValidate:!0}),onSearchChange:s=>L(s),isLoading:$,shouldBeFullwidth:!0}),e.jsx(n,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),t.groupId&&e.jsx(i,{color:"error",fontSize:"14px",children:t.groupId.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"MT5 ID *"}),e.jsx(x,{...m("login",{required:!0}),size:"small",fullWidth:!0,placeholder:"MT5 ID",variant:"outlined"}),t.login&&e.jsx(i,{color:"error",fontSize:"14px",children:t.login.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Pass Main *"}),e.jsx(x,{...m("PassMain",{required:!0}),size:"small",fullWidth:!0,placeholder:"Pass Main",variant:"outlined"}),t.PassMain&&e.jsx(i,{color:"error",fontSize:"14px",children:t.PassMain.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Pass Investor"}),e.jsx(x,{...m("PassInvestor",{required:!0}),size:"small",fullWidth:!0,placeholder:"Pass Investor",variant:"outlined"}),t.PassInvestor&&e.jsx(i,{color:"error",fontSize:"14px",children:t.PassInvestor.message})]})]}),e.jsx(U,{variant:"contained",type:"submit",disabled:A,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{Y as default};
