import{bz as m,c as U,r as k,ax as G,a as P,a_ as V,bM as $,j as e,S as w,T as o,aH as A,G as u,I as c,e as M,h as Q,b as R,i as B}from"./index-oaA_Ltxz.js";import{S as _}from"./SearchableSelector-B0BDCd1f.js";import{C as H}from"./Card-CaAkebAw.js";const O=m.object({amount:m.string().min(1,"Amount is required"),ibId:m.number({required_error:"IB is required"}).nullable().refine(i=>i!==null,{message:"IB is required"})});function Y(){var b,g,I,p,S;const i=U(),[d,y]=k.useState(""),{data:l,isLoading:D}=G({page:1,sizePerPage:10,search:d,isIb:!0},{skip:d.length<2}),v=d.length>=2?((b=l==null?void 0:l.data)==null?void 0:b.usersList)||[]:[],h={amount:"",ibId:null},{register:z,handleSubmit:L,reset:F,watch:x,setValue:W,formState:{errors:r}}=P({resolver:R(O),defaultValues:h});let n=x("ibId");const{data:a,isLoading:C}=V({id:n},{skip:!n}),q=n&&!C&&((I=(g=a==null?void 0:a.data)==null?void 0:g.assetData)==null?void 0:I.totalIBIncome)-((S=(p=a==null?void 0:a.data)==null?void 0:p.assetData)==null?void 0:S.totalIBWithdrawl),[E,{isLoading:N}]=$(),T=async t=>{var f,j;try{const s=await E(t).unwrap();s!=null&&s.status&&(i(B({open:!0,message:s==null?void 0:s.message,severity:"success"})),F(h),n=null)}catch(s){(f=s==null?void 0:s.data)!=null&&f.status||i(B({open:!0,message:((j=s==null?void 0:s.data)==null?void 0:j.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(w,{children:[e.jsx(o,{sx:{fontSize:"2rem",fontWeight:"700"},children:"IB Withdraw"}),e.jsxs(H,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},component:"form",onSubmit:L(T),children:[e.jsx(o,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx(A,{sx:{my:"1.2rem"}}),e.jsxs(u,{container:!0,size:12,spacing:2,children:[e.jsxs(u,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(c,{sx:{mb:".5rem"},children:"Select IB *"}),e.jsx(_,{width:"100%",items:v.map(t=>({value:t.id,name:`${t.name} (${t.email})`})),value:x("ibId"),onChange:t=>W("ibId",t,{shouldValidate:!0}),onSearchChange:t=>y(t),isLoading:D,shouldBeFullwidth:!0}),r.ibId&&e.jsx(o,{color:"error",fontSize:"14px",children:r.ibId.message})]}),e.jsxs(u,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsxs(w,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[e.jsx(c,{sx:{mb:".5rem"},children:"Amount IN USD *"}),e.jsxs(c,{children:["$ ",Number(q||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:4})]})]}),e.jsx(M,{...z("amount",{required:!0}),size:"small",multiline:!0,fullWidth:!0,variant:"outlined",placeholder:"Enter amount IN USD"}),r.amount&&e.jsx(o,{color:"error",fontSize:"14px",children:r.amount.message})]})]}),e.jsx(Q,{variant:"contained",type:"submit",disabled:N,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{O as addOrEditCommissionGroupSchema,Y as default};
