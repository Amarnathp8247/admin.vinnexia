import{o as F,s as x,aC as W,X as E,c as N,r as f,av as V,a as q,bK as A,j as e,S as B,T as i,aF as $,G as o,I as m,aG as k,e as G,h as R,b as K,k as b}from"./index-BuLT-AS9.js";import{S as U}from"./SearchableSelector-DnYtu6tK.js";import{M as H}from"./MoneyInput-CfTSpKUz.js";import{C as O}from"./Card-C53o8KFk.js";const Q=F({userId:W({required_error:"Client is required"}).nullable().refine(r=>r!==null,{message:"Client is required"}),amount:x().min(1,"Please type deposit amount"),comment:x().min(1,"Please type your comment").min(3,"Atlease 3 characters mandatory"),paymentMethods:x().min(1,"Please select your payment method")});function Z(){var j;const{state:r}=E(),l=r==null?void 0:r.email,u=r==null?void 0:r.userId,C=r==null?void 0:r.userName,p=N(),[c,v]=f.useState(""),{data:h,isLoading:z}=V({page:1,sizePerPage:5,search:c},{skip:c.length<3}),I=c.length>=3?((j=h==null?void 0:h.data)==null?void 0:j.usersList)||[]:[],g={userId:null,amount:"",comment:"",paymentMethods:""},{register:w,handleSubmit:D,reset:M,watch:d,setValue:n,formState:{errors:a}}=q({resolver:K(Q),defaultValues:g});f.useEffect(()=>{u&&n("userId",u)},[u,n]);const[L,{isLoading:P}]=A(),T=async s=>{var y,S;try{const t=await L(s).unwrap();t!=null&&t.status&&(p(b({open:!0,message:t==null?void 0:t.message,severity:"success"})),M({...g,userId:l?d("userId"):null}))}catch(t){(y=t==null?void 0:t.data)!=null&&y.status||p(b({open:!0,message:((S=t==null?void 0:t.data)==null?void 0:S.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(B,{children:[e.jsx(i,{sx:{fontSize:"2rem",fontWeight:"700"},children:"Wallet Deposit"}),e.jsxs(O,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},component:"form",onSubmit:D(T),children:[e.jsx(i,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx($,{sx:{my:"1.2rem"}}),e.jsxs(o,{container:!0,size:12,spacing:2,children:[e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(m,{sx:{mb:".5rem"},children:"Select Client *"}),e.jsx(U,{width:"100%",disabled:l,items:l?[{value:u,name:`${C} (${l})`}]:I.map(s=>({value:s.id,name:`${s.name} (${s.email})`})),value:d("userId"),onChange:s=>n("userId",s,{shouldValidate:!0}),onSearchChange:s=>v(s),isLoading:z,shouldBeFullwidth:!0}),e.jsx(m,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),a.userId&&e.jsx(i,{color:"error",fontSize:"14px",children:a.userId.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(m,{sx:{mb:".5rem"},children:"Amount IN USD *"}),e.jsx(H,{size:"small",fullWidth:!0,variant:"outlined",value:d("amount"),onChange:s=>n("amount",s,{shouldValidate:!0})}),a.amount&&e.jsx(i,{color:"error",fontSize:"14px",children:a.amount.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(m,{sx:{mb:".5rem"},children:"Payment Methods"}),e.jsx(k,{value:d("paymentMethods"),items:["BANK","CASH","CRYPTO"],onChange:s=>n("paymentMethods",s.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),a.paymentMethods&&e.jsx(i,{color:"error",fontSize:"14px",children:a.paymentMethods.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(m,{sx:{mb:".5rem"},children:"Comment *"}),e.jsx(G,{...w("comment",{required:!0}),size:"small",multiline:!0,fullWidth:!0,variant:"outlined",placeholder:"Enter Comment"}),a.comment&&e.jsx(i,{color:"error",fontSize:"14px",children:a.comment.message})]})]}),e.jsx(R,{variant:"contained",type:"submit",disabled:P,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{Z as default};
