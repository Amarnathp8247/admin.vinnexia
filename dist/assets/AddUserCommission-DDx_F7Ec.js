import{bz as m,c as V,r as S,a as k,bb as T,av as A,bH as E,j as e,T as t,B as $,h as f,$ as M,aF as N,G as u,I as j,b as Q,k as L}from"./index-Bjlp2vES.js";import{S as w}from"./SearchableSelector-C6ndV5ZN.js";import{C as R}from"./Card--HSV-vWh.js";const _=m.object({planId:m.number({required_error:"Plan is required"}).nullable().refine(r=>r!==null,{message:"Plan is required"}),ibId:m.number({required_error:"IB is required"}).nullable().refine(r=>r!==null,{message:"IB is required"})});function K(){var p,b;const r=V(),[n,B]=S.useState(""),[o,C]=S.useState(""),c={planId:null,ibId:null},{register:H,handleSubmit:v,reset:y,watch:h,setValue:x,formState:{errors:i}}=k({resolver:Q(_),defaultValues:c}),{data:d,isLoading:z}=T({page:1,sizePerPage:10,search:n},{skip:n.length<3}),{data:l,isLoading:P}=A({page:1,sizePerPage:10,search:o,isIb:!0},{skip:o.length<2}),F=n.length>=3?((p=d==null?void 0:d.data)==null?void 0:p.usersList)||[]:[],U=o.length>=2?((b=l==null?void 0:l.data)==null?void 0:b.usersList)||[]:[],[q,{isLoading:G}]=E(),D=async s=>{var g,I;try{const a=await q(s).unwrap();a!=null&&a.status&&(r(L({open:!0,message:a==null?void 0:a.message,severity:"success"})),y(c))}catch(a){(g=a==null?void 0:a.data)!=null&&g.status||r(L({open:!0,message:((I=a==null?void 0:a.data)==null?void 0:I.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(e.Fragment,{children:[e.jsx(t,{sx:{fontSize:"2rem",fontWeight:"700",mb:"2rem"},children:"Add User Commission"}),e.jsx($,{display:"flex",justifyContent:"flex-end",children:e.jsx(f,{component:M,to:"/admin/IBManagement/setIBCommission",variant:"contained",sx:{textTransform:"capitalize",boxShadow:"none",color:"white","&:hover":{boxShadow:"none"}},children:"View User Commission"})}),e.jsxs(R,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},component:"form",onSubmit:v(D),children:[e.jsx(t,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx(N,{sx:{my:"1.2rem"}}),e.jsxs(u,{container:!0,size:12,spacing:3,children:[e.jsxs(u,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(j,{sx:{mb:".5rem"},children:"Select IB *"}),e.jsx(w,{width:"100%",items:U.map(s=>({value:s.id,name:`${s.name} (${s.email})`})),value:h("ibId"),onChange:s=>x("ibId",s,{shouldValidate:!0}),onSearchChange:s=>C(s),isLoading:P,shouldBeFullwidth:!0}),i.ibId&&e.jsx(t,{color:"error",fontSize:"14px",children:i.ibId.message})]}),e.jsxs(u,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(j,{sx:{mb:".5rem"},children:"Select Plan *"}),e.jsx(w,{width:"100%",items:F.map(s=>({value:s.id,name:s.planName})),value:h("planId"),onChange:s=>x("planId",s,{shouldValidate:!0}),onSearchChange:s=>B(s),isLoading:z,shouldBeFullwidth:!0}),i.planId&&e.jsx(t,{color:"error",fontSize:"14px",children:i.planId.message})]})]}),e.jsx(f,{variant:"contained",type:"submit",disabled:G,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{_ as addOrEditCommissionGroupSchema,K as default};
