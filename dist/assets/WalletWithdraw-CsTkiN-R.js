import{o as F,s as x,aC as D,X as E,c as N,r as y,av as V,a as q,bL as A,j as e,S as B,T as i,aF as $,G as o,I as m,aG as k,e as G,h as R,b as U,k as b}from"./index-B_S0l-pH.js";import{S as H}from"./SearchableSelector-C9pLKMko.js";import{M as K}from"./MoneyInput-BLo1ppTO.js";import{C as O}from"./Card-BbyUSaIa.js";const Q=F({userId:D({required_error:"Client is required"}).nullable().refine(a=>a!==null,{message:"Client is required"}),amount:x().min(1,"Please type deposit amount"),comment:x().min(1,"Please type your comment").min(3,"Atlease 3 characters mandatory"),paymentMethods:x().min(1,"Please select your payment method")});function Z(){var f;const{state:a}=E(),l=a==null?void 0:a.email,u=a==null?void 0:a.userId,w=a==null?void 0:a.userName,p=N(),[c,C]=y.useState(""),{data:h,isLoading:v}=V({page:1,sizePerPage:5,search:c},{skip:c.length<3}),z=c.length>=3?((f=h==null?void 0:h.data)==null?void 0:f.usersList)||[]:[],g={userId:null,amount:"",comment:"",paymentMethods:""},{register:I,handleSubmit:W,reset:L,watch:d,setValue:n,formState:{errors:r}}=q({resolver:U(Q),defaultValues:g});y.useEffect(()=>{u&&n("userId",u)},[u,n]);const[M,{isLoading:P}]=A(),T=async s=>{var S,j;try{const t=await M(s).unwrap();t!=null&&t.status&&(p(b({open:!0,message:t==null?void 0:t.message,severity:"success"})),L({...g,userId:l?d("userId"):null}))}catch(t){(S=t==null?void 0:t.data)!=null&&S.status||p(b({open:!0,message:((j=t==null?void 0:t.data)==null?void 0:j.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(B,{children:[e.jsx(i,{sx:{fontSize:"2rem",fontWeight:"700"},children:"Wallet Withdraw"}),e.jsxs(O,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},component:"form",onSubmit:W(T),children:[e.jsx(i,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx($,{sx:{my:"1.2rem"}}),e.jsxs(o,{container:!0,size:12,spacing:2,children:[e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(m,{sx:{mb:".5rem"},children:"Select Client *"}),e.jsx(H,{width:"100%",disabled:l,items:l?[{value:u,name:`${w} (${l})`}]:z.map(s=>({value:s.id,name:`${s.name} (${s.email})`})),value:d("userId"),onChange:s=>n("userId",s,{shouldValidate:!0}),onSearchChange:s=>C(s),isLoading:v,shouldBeFullwidth:!0}),e.jsx(m,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),r.userId&&e.jsx(i,{color:"error",fontSize:"14px",children:r.userId.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(m,{sx:{mb:".5rem"},children:"Amount IN USD *"}),e.jsx(K,{size:"small",fullWidth:!0,variant:"outlined",value:d("amount"),onChange:s=>n("amount",s,{shouldValidate:!0})}),r.amount&&e.jsx(i,{color:"error",fontSize:"14px",children:r.amount.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(m,{sx:{mb:".5rem"},children:"Payment Methods"}),e.jsx(k,{value:d("paymentMethods"),items:["BANK","CASH","CRYPTO"],onChange:s=>n("paymentMethods",s.target.value,{shouldValidate:!0}),shouldBeFullWidth:!0}),r.paymentMethods&&e.jsx(i,{color:"error",fontSize:"14px",children:r.paymentMethods.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(m,{sx:{mb:".5rem"},children:"Comment *"}),e.jsx(G,{size:"small",...I("comment",{required:!0}),multiline:!0,fullWidth:!0,variant:"outlined",placeholder:"Enter Comment"}),r.comment&&e.jsx(i,{color:"error",fontSize:"14px",children:r.comment.message})]})]}),e.jsx(R,{variant:"contained",type:"submit",disabled:P,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{Z as default};
