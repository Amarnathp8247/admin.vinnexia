import{o as W,s as f,r as g,u as P,a as R,b as V,c as A,d as B,j as e,B as b,T as n,G as l,I as y,e as M,O,f as D,g as E,V as H,h as L,i as q,k as j}from"./index-Bjlp2vES.js";import{V as F}from"./Visibility-fvUdZaAw.js";import{T as G,g as U,H as Y}from"./index-C7QIJQcj.js";import{C as _}from"./Container-CR_GHJ8q.js";import"./ModalComponent-BqVfaX8R.js";const r=U("dark"),$=W({userName:f().trim().min(1,"User name or email is required"),password:f().min(8,"Password must be at least 8 characters")}),J="Vinnexia";function re(){const[o,w]=g.useState(!1),S=g.useRef(null),C=()=>w(i=>!i),[v,{isLoading:d}]=P(),I={userName:"",password:""},{register:c,handleSubmit:k,setError:K,formState:{errors:s}}=R({resolver:V($),defaultValues:I}),a=A();B();const z=async i=>{var m,p,u,x,h;try{const t=await v(i).unwrap();if(t!=null&&t.status){const T=(m=t==null?void 0:t.data)==null?void 0:m.token,N=(u=(p=t==null?void 0:t.data)==null?void 0:p.userData)==null?void 0:u.id;S.current=q({token:T,dispatch:a,currentUserId:N}),a(j({open:!0,message:t==null?void 0:t.message,severity:"success"}))}}catch(t){(x=t==null?void 0:t.data)!=null&&x.status||a(j({open:!0,message:((h=t==null?void 0:t.data)==null?void 0:h.message)||"Failed to sign in. Please try again later.",severity:"error"}))}};return e.jsx(G,{theme:r,children:e.jsxs(b,{display:"flex",flexDirection:"column",minHeight:"100vh",sx:{bgcolor:r.palette.background.default},children:[e.jsx(Y,{}),e.jsx(b,{component:"main",flexGrow:1,sx:{display:"flex",alignItems:"center",justifyContent:"center",bgcolor:r.palette.background.default},children:e.jsxs(_,{maxWidth:"xs",component:"form",onSubmit:k(z),sx:{bgcolor:r.palette.background.paper,borderRadius:2,p:4,boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[e.jsxs(n,{sx:{fontSize:"1.7rem",fontWeight:"700",mb:"1.5rem",color:r.palette.text.primary,textAlign:"center"},children:["Welcome to ",J]}),e.jsxs(l,{container:!0,size:12,spacing:3,children:[e.jsxs(l,{size:{xs:12},children:[e.jsx(y,{sx:{mb:".5rem",fontSize:"14px",color:r.palette.text.secondary,fontWeight:500},children:"Your email address or user name"}),e.jsx(M,{...c("userName",{required:!0}),fullWidth:!0,size:"small",sx:{"& .MuiOutlinedInput-root":{bgcolor:"rgba(255,255,255,0.05)",color:r.palette.text.primary,"& fieldset":{borderColor:r.palette.divider},"&:hover fieldset":{borderColor:r.palette.primary.main},"&.Mui-focused fieldset":{borderColor:r.palette.primary.main}}}}),s.userName&&e.jsx(n,{color:"error",fontSize:"14px",sx:{mt:.5},children:s.userName.message})]}),e.jsxs(l,{size:{xs:12},children:[e.jsx(y,{sx:{mb:".5rem",fontSize:"14px",color:r.palette.text.secondary,fontWeight:500},children:"Password"}),e.jsx(O,{...c("password",{required:!0}),size:"small",fullWidth:!0,type:o?"text":"password",sx:{bgcolor:"rgba(255,255,255,0.05)",color:r.palette.text.primary,"& fieldset":{borderColor:r.palette.divider},"&:hover fieldset":{borderColor:r.palette.primary.main},"&.Mui-focused fieldset":{borderColor:r.palette.primary.main}},endAdornment:e.jsx(D,{position:"end",children:e.jsx(E,{"aria-label":o?"hide the password":"display the password",onClick:C,edge:"end",sx:{color:r.palette.primary.main,"&:hover":{bgcolor:"rgba(126, 98, 51, 0.2)"}},children:o?e.jsx(H,{}):e.jsx(F,{})})})}),s.password&&e.jsx(n,{color:"error",fontSize:"14px",sx:{mt:.5},children:s.password.message})]})]}),e.jsx(L,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",disabled:d,sx:{mt:"2rem",textTransform:"none",boxShadow:"none",color:"white",py:".8rem",fontWeight:600,fontSize:"16px","&:hover":{boxShadow:`0 6px 12px ${r.palette.primary.main}40`,transform:"translateY(-2px)"}},children:d?"Signing in...":"Continue"})]})})]})})}export{re as default,$ as signinSchema};
