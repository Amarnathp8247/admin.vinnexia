import{Q as y,j as e,r as W,cH as I,aw as M,T as n,aB as R,n as v,B as m,S as l,ap as g,ak as i,d9 as k,G as x}from"./index-B_S0l-pH.js";import{W as z,T as A,a as D}from"./Web-CvN3snGV.js";import{C as b}from"./Card-BbyUSaIa.js";import{A as f}from"./Avatar-C2WA4wO0.js";const P=y(e.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),V=y(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People"),F=y(e.jsx("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline"),U=(a=0)=>a>=100?{label:"High",color:"success"}:a>=40?{label:"Medium",color:"warning"}:{label:"Low",color:"error"};function $({screenStats:a=[],isLoading:r=!1}){const[s,t]=W.useState({pageIndex:0,pageSize:10}),c=W.useMemo(()=>[{accessorKey:"_id",header:"Screen ID",size:220},{accessorKey:"totalVisits",header:"Visits",size:80},{accessorKey:"uniqueUsers",header:"Users",size:80},{accessorKey:"avgDuration",header:"Avg Time (sec)",size:120},{accessorKey:"totalActions",header:"Actions",size:90},{header:"Engagement",Cell:({row:u})=>{const h=U(u.original.avgDuration);return e.jsx(I,{label:h.label,color:h.color,size:"small"})}}],[]),o=M({columns:c,data:a,enablePagination:!0,onPaginationChange:t,state:{pagination:s,isLoading:r},initialState:{pagination:{pageIndex:0,pageSize:10}},enableColumnFilters:!1,enableColumnActions:!1,enableSorting:!0,paginationDisplayMode:"pages"});return e.jsxs(e.Fragment,{children:[e.jsx(n,{fontWeight:"bold",mb:2,children:"Screen Statistics"}),e.jsx(R,{table:o})]})}function K({popularTransitions:a=[],isLoading:r=!1}){const s=v();return e.jsx(m,{children:r?e.jsxs(l,{spacing:2,children:[e.jsx(g,{height:60,width:"100%",sx:{borderRadius:2}}),e.jsx(g,{height:60,width:"100%",sx:{borderRadius:2}}),e.jsx(g,{height:60,width:"100%",sx:{borderRadius:2}})]}):a.length===0?e.jsxs(l,{alignItems:"center",justifyContent:"center",py:4,spacing:2,sx:{opacity:.6},children:[e.jsx(F,{sx:{fontSize:48,color:"text.secondary"}}),e.jsx(n,{variant:"body1",color:"text.secondary",children:"No transition data available"})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"16px"},children:a.map((t,c)=>e.jsx(m,{sx:{p:2,borderRadius:"16px",bgcolor:i(s.palette.background.paper,.4),border:`1px solid ${i(s.palette.divider,.1)}`,transition:"all 0.2s ease-in-out","&:hover":{bgcolor:i(s.palette.primary.main,.04),borderColor:i(s.palette.primary.main,.2),transform:"translateY(-2px)"}},children:e.jsxs(l,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,children:[e.jsxs(l,{direction:"row",alignItems:"center",spacing:1.5,flex:1,overflow:"hidden",children:[e.jsx(m,{sx:{minWidth:32,height:32,borderRadius:"50%",bgcolor:i(s.palette.primary.main,.1),color:s.palette.primary.main,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700,fontSize:"0.875rem"},children:c+1}),e.jsxs(l,{direction:"column",minWidth:0,children:[e.jsx(n,{variant:"subtitle2",fontWeight:700,noWrap:!0,title:t.from,children:t.from}),e.jsxs(l,{direction:"row",alignItems:"center",spacing:.5,color:"text.secondary",children:[e.jsx(P,{sx:{fontSize:14}}),e.jsx(n,{variant:"caption",noWrap:!0,title:t.to,sx:{fontWeight:500},children:t.to})]})]})]}),e.jsx(I,{label:`${t.count} hits`,size:"small",color:"primary",variant:"outlined",sx:{fontWeight:600,bgcolor:i(s.palette.primary.main,.1),color:s.palette.primary.main,border:"none"}})]})},c))})})}const p=({label:a,value:r,icon:s,color:t="primary",isLoading:c})=>{const o=v();return e.jsxs(b,{sx:{p:2.5,height:"100%",borderRadius:"20px",boxShadow:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",bgcolor:i(o.palette[t].main,.04),border:`1px solid ${i(o.palette[t].main,.1)}`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:`0 8px 24px ${i(o.palette[t].main,.15)}`,bgcolor:i(o.palette[t].main,.08)}},children:[e.jsx(f,{sx:{bgcolor:i(o.palette[t].main,.1),color:o.palette[t].main,mb:1.5,width:48,height:48},children:s}),e.jsx(n,{variant:"h5",fontWeight:800,color:"text.primary",mb:.5,children:c?e.jsx(g,{width:60}):r}),e.jsx(n,{variant:"body2",color:"text.secondary",fontWeight:500,children:a})]})};function G(){var S,w,C,T;const a=v(),{data:r,isLoading:s}=k(),t=(S=r==null?void 0:r.data)!=null&&S.screenStats?(w=r==null?void 0:r.data)==null?void 0:w.screenStats:[],c=(C=r==null?void 0:r.data)!=null&&C.popularTransitions?(T=r==null?void 0:r.data)==null?void 0:T.popularTransitions:[],o=t.reduce((d,j)=>d+(j.totalVisits||0),0),u=t.length?Math.max(...t.map(d=>d.uniqueUsers||0)):0,h=t.length?Math.round(t.reduce((d,j)=>d+(j.avgDuration||0),0)/t.length):0;return e.jsxs(m,{children:[e.jsxs(l,{mb:4,children:[e.jsx(n,{variant:"h4",fontWeight:800,sx:{background:`linear-gradient(45deg, ${a.palette.primary.main}, ${a.palette.secondary.main})`,backgroundClip:"text",textFillColor:"transparent",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",mb:1},children:"Screen Analytics"}),e.jsx(n,{variant:"body1",color:"text.secondary",children:"Analyze screen performance and user flow transitions"})]}),e.jsx(n,{variant:"h6",fontWeight:700,mb:2,children:"Overview Metrics"}),e.jsxs(x,{container:!0,spacing:2,mb:4,children:[e.jsx(x,{size:{xs:6,sm:6,md:3},children:e.jsx(p,{label:"Total Screens",value:t.length,icon:e.jsx(z,{}),color:"primary",isLoading:s})}),e.jsx(x,{size:{xs:6,sm:6,md:3},children:e.jsx(p,{label:"Total Visits",value:o,icon:e.jsx(A,{}),color:"info",isLoading:s})}),e.jsx(x,{size:{xs:6,sm:6,md:3},children:e.jsx(p,{label:"Peak Unique Users",value:u,icon:e.jsx(V,{}),color:"success",isLoading:s})}),e.jsx(x,{size:{xs:6,sm:6,md:3},children:e.jsx(p,{label:"Avg Duration (s)",value:h,icon:e.jsx(D,{}),color:"warning",isLoading:s})})]}),e.jsxs(l,{spacing:4,children:[e.jsxs(b,{sx:{p:3,borderRadius:"24px",boxShadow:a.shadows[3],overflow:"hidden"},children:[e.jsxs(l,{direction:"row",alignItems:"center",spacing:2,mb:3,children:[e.jsx(f,{sx:{bgcolor:i(a.palette.primary.main,.1),color:a.palette.primary.main},children:e.jsx(z,{})}),e.jsx(n,{variant:"h6",fontWeight:700,children:"Screen Statistics"})]}),e.jsx($,{screenStats:t,isLoading:s})]}),e.jsxs(b,{sx:{p:3,borderRadius:"24px",boxShadow:a.shadows[3],overflow:"hidden"},children:[e.jsxs(l,{direction:"row",alignItems:"center",spacing:2,mb:3,children:[e.jsx(f,{sx:{bgcolor:i(a.palette.secondary.main,.1),color:a.palette.secondary.main},children:e.jsx(A,{})}),e.jsx(n,{variant:"h6",fontWeight:700,children:"Popular Transitions"})]}),e.jsx(K,{popularTransitions:c,isLoading:s})]})]})]})}export{G as default};
