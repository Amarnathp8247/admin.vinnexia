import{av as P,j as t,T as c,Z as T,c as R,dh as z,di as F,S as b,h as C,i as g,r as v,dj as L,ay as D,aI as M,aD as E}from"./index-oaA_Ltxz.js";const r=P(),I=[r.display({header:"User Email",size:150,Cell:({row:a})=>{var i;const s=a==null?void 0:a.original;return t.jsx(c,{component:T,to:"/admin/posts/postDetails",state:s,sx:{color:"inherit"},children:(i=a.original.user)==null?void 0:i.email})}}),r.display({header:"User Name",size:150,Cell:({row:a})=>{var s;return t.jsx(c,{children:(s=a.original.user)==null?void 0:s.name})}}),r.display({header:"Post Type",size:150,Cell:({row:a})=>t.jsx(c,{children:a.original.postType})}),r.accessor("status",{header:"Status",size:200}),r.accessor("createdAt",{header:"Created At",size:200,Cell:({row:a})=>t.jsx(c,{children:new Date(a.original.createdAt).toLocaleString()})}),r.display({id:"action",header:"Action",size:200,Cell:({row:a})=>{var o,p;const s=(o=a==null?void 0:a.original)==null?void 0:o._id,i=R(),[m,{isLoading:d}]=z(),[h,{isLoading:l}]=F(),x=async()=>{var n;try{const e=await m({postId:s}).unwrap();(e==null?void 0:e.status)=="success"&&i(g({open:!0,message:e==null?void 0:e.message,severity:"success"}))}catch(e){i(g({open:!0,message:((n=e==null?void 0:e.data)==null?void 0:n.message)||"Failed to submit. Please try again later.",severity:"error"}))}},u=async()=>{var n;try{const e=await h({postId:s}).unwrap();(e==null?void 0:e.status)=="success"&&i(g({open:!0,message:e==null?void 0:e.message,severity:"success"}))}catch(e){i(g({open:!0,message:((n=e==null?void 0:e.data)==null?void 0:n.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return((p=a==null?void 0:a.original)==null?void 0:p.status)=="inReview"&&t.jsxs(b,{sx:{flexDirection:"row",gap:"10px"},children:[t.jsx(C,{variant:"contained",onClick:x,disabled:d,children:"Approve"}),t.jsx(C,{variant:"contained",onClick:u,disabled:l,children:"Reject"})]})}})],k=[{label:"All",value:"all"},{label:"Rejected",value:"rejected"},{label:"Live",value:"live"},{label:"In-Review",value:"inReview"}];function G(){var j,y,f,A;const[a,s]=v.useState({pageIndex:0,pageSize:10}),[i,m]=v.useState(""),[d,h]=v.useState("all"),{data:l,isLoading:x,isError:u,error:o}=L({page:a.pageIndex+1,limit:a.pageSize,status:d}),p=(j=o==null?void 0:o.data)==null?void 0:j.message,n=((y=l==null?void 0:l.data)==null?void 0:y.posts)||[],e=D({columns:I,data:n,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:((A=(f=l==null?void 0:l.data)==null?void 0:f.pagination)==null?void 0:A.total)||0,state:{pagination:a,globalFilter:i,isLoading:x,showAlertBanner:u},initialState:{showGlobalFilter:!0},onPaginationChange:s,onGlobalFilterChange:m,columnFilterDisplayMode:"popover",paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiToolbarAlertBannerProps:u?{color:"error",children:p||"Error loading Documents List."}:void 0});return t.jsxs(t.Fragment,{children:[t.jsx(c,{variant:"h5",fontWeight:"700",fontSize:"1.8rem",mb:"2rem",children:"All Posts List"}),t.jsxs(b,{children:[t.jsx(c,{sx:{mb:"5px",fontSize:"12px"},children:"Status"}),t.jsx(M,{value:d,items:k,onChange:S=>h(S.target.value),width:{xs:"100%",sm:200},showDefaultOption:!1})]}),t.jsx(b,{sx:{marginTop:"2rem",borderRadius:"1.2rem",overflow:"hidden"},children:t.jsx(E,{table:e})})]})}export{G as default};
