import{o as B,s as m,aC as q,c as W,r as D,a as k,av as E,aI as M,b5 as R,j as e,S as V,T as i,aF as G,G as o,I as n,aG as N,e as y,h as A,b as Q,k as v}from"./index-BuLT-AS9.js";import{S as $}from"./SearchableSelector-DnYtu6tK.js";import{C as _}from"./Card-C53o8KFk.js";const H=B({userId:q({required_error:"Client is required"}).nullable().refine(l=>l!==null,{message:"Client is required"}),mt5Login:m().min(1,"MT5 user is required"),amount:m().min(1,"Please type deposit amount"),comment:m().min(1,"Please type your comment").min(3,"Atlease 3 characters mandatory"),type:m()});function U(){var j;const l=W(),[u,z]=D.useState(""),x={userId:null,mt5Login:"",amount:"",comment:"",type:"3"},{register:g,handleSubmit:C,reset:I,watch:d,setValue:p,formState:{errors:r}}=k({resolver:Q(H),defaultValues:x}),S=d("userId"),{data:c,isLoading:L}=E({page:1,sizePerPage:10,search:u},{skip:u.length<3}),{data:h}=M({page:1,sizePerPage:10,id:S},{skip:!S}),a=h==null?void 0:h.data,w=u.length>=3?((j=c==null?void 0:c.data)==null?void 0:j.usersList)||[]:[],[T,{isLoading:F}]=R(),P=async s=>{var b,f;try{const t=await T(s).unwrap();t!=null&&t.status&&(l(v({open:!0,message:t==null?void 0:t.message,severity:"success"})),I(x))}catch(t){(b=t==null?void 0:t.data)!=null&&b.status||l(v({open:!0,message:((f=t==null?void 0:t.data)==null?void 0:f.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsxs(V,{children:[e.jsx(i,{sx:{fontSize:"2rem",fontWeight:"700"},children:"Remove Bonus"}),e.jsxs(_,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"},mt:"2rem"},component:"form",onSubmit:C(P),children:[e.jsx(i,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),e.jsx(G,{sx:{my:"1.2rem"}}),e.jsxs(o,{container:!0,size:12,spacing:2,children:[e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Select Client *"}),e.jsx($,{width:"100%",items:w.map(s=>({value:s.id,name:`${s.name} (${s.email})`})),value:d("userId"),onChange:s=>p("userId",s,{shouldValidate:!0}),onSearchChange:s=>z(s),isLoading:L,shouldBeFullwidth:!0}),e.jsx(n,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),r.userId&&e.jsx(i,{color:"error",fontSize:"14px",children:r.userId.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Select MT5 ID *"}),e.jsx(N,{shouldBeDisabled:!(a!=null&&a.length)>0,value:d("mt5Login"),onChange:s=>p("mt5Login",s.target.value,{shouldValidate:!0}),items:a==null?void 0:a.map(s=>({value:s.Login,name:s.Login})),shouldBeFullWidth:!0}),e.jsx(n,{sx:{fontSize:"12px"},children:"First select client"}),r.mt5Login&&e.jsx(i,{color:"error",fontSize:"14px",children:r.mt5Login.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Amount IN USD"}),e.jsx(y,{...g("amount",{required:!0}),size:"small",fullWidth:!0,variant:"outlined",placeholder:"Enter amount IN USD"}),r.amount&&e.jsx(i,{color:"error",fontSize:"14px",children:r.amount.message})]}),e.jsxs(o,{item:!0,size:{xs:12,sm:6,md:4},children:[e.jsx(n,{sx:{mb:".5rem"},children:"Comment"}),e.jsx(y,{...g("comment",{required:!0}),size:"small",multiline:!0,fullWidth:!0,variant:"outlined",placeholder:"Enter Comment"}),r.comment&&e.jsx(i,{color:"error",fontSize:"14px",children:r.comment.message})]})]}),e.jsx(A,{variant:"contained",type:"submit",disabled:F,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{U as default};
