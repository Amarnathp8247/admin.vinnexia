import{o as w,aK as C,aL as d,aE as v,c as G,r as I,ax as L,a as E,aM as U,j as a,S as J,T as r,aH as O,G as n,I as o,h as V,b as B,i as j}from"./index-oaA_Ltxz.js";import{S as M}from"./SearchableSelector-B0BDCd1f.js";import{F as c}from"./FileUploadTextArea-BP5mJwmk.js";import{C as N}from"./Card-CaAkebAw.js";const q=w({userId:v({required_error:"Client is required"}).nullable().refine(e=>e!==null,{message:"Client is required"}),poi:d(File,{message:"Please upload a valid image file"}).refine(e=>["image/jpeg","image/png","image/jpg","application/pdf"].includes(e==null?void 0:e.type),{message:"Only JPEG, PNG, JPG and PDF files are allowed"}).refine(e=>e&&e.size<=5*1024*1024,{message:"File size must not exceed 5MB"}),poa:d(File,{message:"Please upload a valid image file"}).refine(e=>["image/jpeg","image/png","image/jpg","application/pdf"].includes(e==null?void 0:e.type),{message:"Only JPEG, PNG, JPG and PDF files are allowed"}).refine(e=>e&&e.size<=5*1024*1024,{message:"File size must not exceed 5MB"}),extraDocs:C(d(File,{message:"Invalid file"}).refine(e=>["image/jpeg","image/png","image/jpg","application/pdf"].includes(e==null?void 0:e.type),{message:"Only JPEG, PNG, JPG and PDF files are allowed"}).refine(e=>e.size<=5*1024*1024,{message:"Each file must not exceed 5MB"}))});function H(){var u;const e=G(),[p,f]=I.useState(""),{data:m,isLoading:y}=L({page:1,sizePerPage:5,search:p},{skip:p.length<3}),b=p.length>=3?((u=m==null?void 0:m.data)==null?void 0:u.usersList)||[]:[],g={userId:null,poi:[],poa:[],extraDocs:[]},{handleSubmit:S,reset:P,watch:D,setValue:l,formState:{errors:t}}=E({resolver:B(q),defaultValues:g}),[z,{isLoading:F}]=U(),T=async s=>{var x,h;try{const i=await z(s).unwrap();i!=null&&i.status&&(e(j({open:!0,message:i==null?void 0:i.message,severity:"success"})),P(g))}catch(i){(x=i==null?void 0:i.data)!=null&&x.status||e(j({open:!0,message:((h=i==null?void 0:i.data)==null?void 0:h.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return a.jsxs(J,{children:[a.jsx(r,{sx:{fontSize:"2rem",fontWeight:"700",mb:"2rem"},children:"Upload User Documents"}),a.jsxs(N,{sx:{boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)",borderRadius:"1.2rem",padding:{xs:"1rem",md:"2rem"}},component:"form",onSubmit:S(T),children:[a.jsx(r,{mx:{xs:"1rem",md:"0"},children:"Fill Details"}),a.jsx(O,{sx:{my:"1.2rem"}}),a.jsxs(n,{container:!0,size:12,spacing:2,children:[a.jsxs(n,{item:!0,size:{xs:12,sm:6,md:4},children:[a.jsx(o,{sx:{mb:".5rem"},children:"Select Client *"}),a.jsx(M,{width:"100%",items:b.map(s=>({value:s.id,name:`${s.name} (${s.email})`})),value:D("userId"),onChange:s=>l("userId",s,{shouldValidate:!0}),onSearchChange:s=>f(s),isLoading:y,shouldBeFullwidth:!0}),a.jsx(o,{sx:{fontSize:"12px"},children:"Please enter 3 or more characters"}),t.userId&&a.jsx(r,{color:"error",fontSize:"14px",children:t.userId.message})]}),a.jsxs(n,{item:!0,size:{xs:12,sm:6,md:4},children:[a.jsx(o,{sx:{mb:".5rem"},children:"Proof of Identity (POI) *"}),a.jsx(c,{onChange:s=>l("poi",s,{shouldValidate:!0}),extentionType:["image/jpeg","image/png","image/jpg","application/pdf"],acceptType:"image/jpeg,image/png,application/pdf",multiple:!1}),t.poi&&a.jsx(r,{color:"error",fontSize:"14px",children:t.poi.message})]}),a.jsxs(n,{item:!0,size:{xs:12,sm:6,md:4},children:[a.jsx(o,{sx:{mb:".5rem"},children:"Proof of Address (POA) *"}),a.jsx(c,{onChange:s=>l("poa",s,{shouldValidate:!0}),extentionType:["image/jpeg","image/png","image/jpg","application/pdf"],acceptType:"image/jpeg,image/png,application/pdf",multiple:!1}),t.poa&&a.jsx(r,{color:"error",fontSize:"14px",children:t.poa.message})]}),a.jsxs(n,{item:!0,size:{xs:12,sm:6,md:4},children:[a.jsx(o,{sx:{mb:".5rem"},children:"Extra fiels"}),a.jsx(c,{onChange:s=>l("extraDocs",s,{shouldValidate:!0}),extentionType:["image/jpeg","image/png","image/jpg","application/pdf"],acceptType:"image/jpeg,image/png,application/pdf",multiple:!0}),t.extraDocs&&a.jsx(r,{color:"error",children:t.extraDocs.message})]})]}),a.jsx(V,{variant:"contained",type:"submit",disabled:F,sx:{textTransform:"capitalize",boxShadow:"none",color:"white",mt:"1.5rem",alignSelf:"self-start","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})}export{H as default};
